(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["backtest~graph~trade"],{"184a":function(t,e,o){},"33aa":function(t,e,o){"use strict";o("184a")},"466f":function(t,e,o){},"5e91":function(t,e,o){"use strict";o("466f")},6967:function(t,e,o){},9731:function(t,e,o){"use strict";o("6967")},c97d:function(t,e,o){},d80d:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"d-flex h-100"},[o("div",{staticClass:"flex-fill container-fluid flex-column align-items-stretch d-flex h-100"},[t.plotConfigModal?o("b-modal",{attrs:{id:"plotConfiguratorModal",title:"Plot Configurator","ok-only":"","hide-backdrop":"","button-size":"sm"}},[o("PlotConfigurator",{attrs:{columns:t.datasetColumns},model:{value:t.plotConfig,callback:function(e){t.plotConfig=e},expression:"plotConfig"}})],1):t._e(),o("div",{staticClass:"row mr-0"},[o("div",{staticClass:"ml-2 d-flex flex-wrap flex-md-nowrap align-items-center"},[o("span",{staticClass:"ml-2 text-nowrap"},[t._v(t._s(t.strategyName)+" | "+t._s(t.timeframe||""))]),o("b-select",{staticClass:"ml-2",staticStyle:{"min-width":"7em"},attrs:{options:t.availablePairs,size:"sm"},on:{change:t.refresh},model:{value:t.pair,callback:function(e){t.pair=e},expression:"pair"}}),o("b-button",{staticClass:"ml-2",attrs:{disabled:!t.pair,size:"sm"},on:{click:t.refresh}},[t._v("↻")]),t.dataset?o("small",{staticClass:"ml-2 text-nowrap"},[t._v("Buysignals: "+t._s(t.dataset.buy_signals))]):t._e(),t.dataset?o("small",{staticClass:"ml-2 text-nowrap"},[t._v("SellSignals: "+t._s(t.dataset.sell_signals))]):t._e(),t.dataset&&t.dataset.enter_short_signals?o("small",{staticClass:"ml-2 text-nowrap"},[t._v("Short entries: "+t._s(t.dataset.enter_short_signals))]):t._e(),t.dataset&&t.dataset.exit_short_signals?o("small",{staticClass:"ml-2 text-nowrap"},[t._v("Short exits: "+t._s(t.dataset.exit_short_signals))]):t._e()],1),o("div",{staticClass:"ml-auto mr-2"},[o("b-select",{attrs:{options:t.availablePlotConfigNames,size:"sm"},on:{change:t.plotConfigChanged},model:{value:t.plotConfigName,callback:function(e){t.plotConfigName=e},expression:"plotConfigName"}})],1),o("div",{staticClass:"mr-0 mr-md-1"},[o("b-button",{attrs:{size:"sm",title:"Plot configurator"},on:{click:t.showConfigurator}},[t._v("⚙")])],1)]),o("div",{staticClass:"row mr-1 ml-1 h-100"},[t.hasDataset?o("CandleChart",{attrs:{dataset:t.dataset,trades:t.trades,"plot-config":t.plotConfig,"use-u-t-c":"UTC"===t.timezone,theme:t.getChartTheme}}):o("label",{staticStyle:{margin:"auto auto","font-size":"1.5rem"}},[t._v("No data available")])],1)],1),o("transition",{attrs:{name:"fade",mode:"in-out"}},[t.plotConfigModal?t._e():o("div",{directives:[{name:"show",rawName:"v-show",value:t.showPlotConfig,expression:"showPlotConfig"}],staticClass:"w-25 config-sidebar"},[o("PlotConfigurator",{attrs:{columns:t.datasetColumns,"as-modal":!1},model:{value:t.plotConfig,callback:function(e){t.plotConfig=e},expression:"plotConfig"}})],1)])],1)},i=[],a=o("3835"),r=o("5530"),s=o("d4ec"),l=o("bee2"),c=o("262e"),u=o("2caf"),d=(o("99af"),o("7db0"),o("9ab4")),p=o("1b40"),h=o("4bb5"),f=o("ebe2"),g=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row flex-grow-1 chart-wrapper"},[t.hasData?o("v-chart",{ref:"candleChart",attrs:{theme:t.theme,autoresize:"","manual-update":""}}):t._e()],1)},m=[];o("a4d3"),o("e01a"),o("d3b7"),o("d28b"),o("3ca3"),o("ddb0");function y(t){return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}o("4de4"),o("c740"),o("b64b"),o("159b"),o("4fad"),o("25f0");var b=function(){return"#".concat((16777215*Math.random()<<0).toString(16))},v=2,x=3;function _(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,n=e%t;return e-n+(o===v?t:0)}var C=o("5c7f"),O=o("22b4"),w=o("f95e"),S=o("7fae"),j=o("6d8b"),k=o("e887"),I=o("deab"),A=o("7d6c"),M=o("cbe5"),P=o("b0af"),T=["color","borderColor"],D=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.prototype.render=function(t,e,o){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,o){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,o,n){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),o=this._data,n=this.group,i=e.getLayout("isSimpleBox"),a=t.get("clip",!0),r=t.coordinateSystem,s=r.getArea&&r.getArea();this._data||n.removeAll(),e.diff(o).add((function(o){if(e.hasValue(o)){var r=e.getItemLayout(o);if(a&&R(s,r))return;var l=z(r,o,!0);I["a"](l,{shape:{points:r.ends}},t,o),B(l,e,o,i),n.add(l),e.setItemGraphicEl(o,l)}})).update((function(r,l){var c=o.getItemGraphicEl(l);if(e.hasValue(r)){var u=e.getItemLayout(r);a&&R(s,u)?n.remove(c):(c?(I["f"](c,{shape:{points:u.ends}},t,r),Object(I["e"])(c)):c=z(u,r),B(c,e,r,i),n.add(c),e.setItemGraphicEl(r,c))}else n.remove(c)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&n.remove(e)})).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),G(t,this.group);var e=t.get("clip",!0)?Object(P["a"])(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){var o,n=e.getData(),i=n.getLayout("isSimpleBox");while(null!=(o=t.next())){var a=n.getItemLayout(o),r=z(a,o);B(r,n,o,i),r.incremental=!0,this.group.add(r)}},e.prototype._incrementalRenderLarge=function(t,e){G(e,this.group,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(k["a"]),N=function(){function t(){}return t}(),L=function(t){function e(e){var o=t.call(this,e)||this;return o.type="normalCandlestickBox",o}return Object(S["a"])(e,t),e.prototype.getDefaultShape=function(){return new N},e.prototype.buildPath=function(t,e){var o=e.points;this.__simpleBox?(t.moveTo(o[4][0],o[4][1]),t.lineTo(o[6][0],o[6][1])):(t.moveTo(o[0][0],o[0][1]),t.lineTo(o[1][0],o[1][1]),t.lineTo(o[2][0],o[2][1]),t.lineTo(o[3][0],o[3][1]),t.closePath(),t.moveTo(o[4][0],o[4][1]),t.lineTo(o[5][0],o[5][1]),t.moveTo(o[6][0],o[6][1]),t.lineTo(o[7][0],o[7][1]))},e}(M["b"]);function z(t,e,o){var n=t.ends;return new L({shape:{points:o?E(n,t):n},z2:100})}function R(t,e){for(var o=!0,n=0;n<e.ends.length;n++)if(t.contain(e.ends[n][0],e.ends[n][1])){o=!1;break}return o}function B(t,e,o,n){var i=e.getItemModel(o);t.useStyle(e.getItemVisual(o,"style")),t.style.strokeNoScale=!0,t.__simpleBox=n,Object(A["E"])(t,i)}function E(t,e){return j["F"](t,(function(t){return t=t.slice(),t[1]=e.initBaseline,t}))}var V=function(){function t(){}return t}(),W=function(t){function e(e){var o=t.call(this,e)||this;return o.type="largeCandlestickBox",o}return Object(S["a"])(e,t),e.prototype.getDefaultShape=function(){return new V},e.prototype.buildPath=function(t,e){for(var o=e.points,n=0;n<o.length;)if(this.__sign===o[n++]){var i=o[n++];t.moveTo(i,o[n++]),t.lineTo(i,o[n++])}else n+=3},e}(M["b"]);function G(t,e,o){var n=t.getData(),i=n.getLayout("largePoints"),a=new W({shape:{points:i},__sign:1});e.add(a);var r=new W({shape:{points:i},__sign:-1});e.add(r),F(1,a,t,n),F(-1,r,t,n),o&&(a.incremental=!0,r.incremental=!0)}function F(t,e,o,n){var i=o.get(["itemStyle",t>0?"borderColor":"borderColor0"])||o.get(["itemStyle",t>0?"color":"color0"]),a=o.getModel("itemStyle").getItemStyle(T);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var Z=D,H=o("4f85"),U=o("b1d4"),q=o("b682");function Y(t,e,o){e=Object(j["s"])(e)&&{coordDimensions:e}||Object(j["m"])({encodeDefine:t.getEncode()},e);var n=t.getSource(),i=Object(U["a"])(n,e).dimensions,a=new q["a"](i,t);return a.initData(n,o),a}var X=o("2f45"),$=o("0f99"),J=function(){function t(){}return t.prototype.getInitialData=function(t,e){var o,n,i=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),r=i.get("type"),s=a.get("type");"category"===r?(t.layout="horizontal",o=i.getOrdinalMeta(),n=!0):"category"===s?(t.layout="vertical",o=a.getOrdinalMeta(),n=!0):t.layout=t.layout||"horizontal";var l=["x","y"],c="horizontal"===t.layout?0:1,u=this._baseAxisDim=l[c],d=l[1-c],p=[i,a],h=p[c].get("type"),f=p[1-c].get("type"),g=t.data;if(g&&n){var m=[];j["k"](g,(function(t,e){var o;j["s"](t)?(o=t.slice(),t.unshift(e)):j["s"](t.value)?(o=j["m"]({},t),o.value=o.value.slice(),t.value.unshift(e)):o=t,m.push(o)})),t.data=m}var y=this.defaultValueDimensions,b=[{name:u,type:Object(X["a"])(h),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:Object(X["a"])(f),dimsDef:y.slice()}];return Y(this,{coordDimensions:b,dimensionsCount:y.length+1,encodeDefaulter:j["i"]($["c"],b,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),K=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],o}return Object(S["a"])(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,o){var n=e.getItemLayout(t);return n&&o.rect(n.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(H["a"]);Object(j["H"])(K,J,!0);var Q=K;function tt(t){t&&j["s"](t.series)&&j["k"](t.series,(function(t){j["z"](t)&&"k"===t.type&&(t.type="candlestick")}))}var et=o("cccd"),ot=["itemStyle","borderColor"],nt=["itemStyle","borderColor0"],it=["itemStyle","color"],at=["itemStyle","color0"],rt={seriesType:"candlestick",plan:Object(et["a"])(),performRawSeries:!0,reset:function(t,e){function o(t,e){return e.get(t>0?it:at)}function n(t,e){return e.get(t>0?ot:nt)}if(!e.isSeriesFiltered(t)){var i=t.pipelineContext.large;return!i&&{progress:function(t,e){var i;while(null!=(i=t.next())){var a=e.getItemModel(i),r=e.getItemLayout(i).sign,s=a.getItemStyle();s.fill=o(r,a),s.stroke=n(r,a)||s.fill;var l=e.ensureUniqueItemVisual(i,"style");Object(j["m"])(l,s)}}}}}},st=rt,lt=o("2306"),ct=o("3842"),ut="undefined"!==typeof Float32Array?Float32Array:Array,dt={seriesType:"candlestick",plan:Object(et["a"])(),reset:function(t){var e=t.coordinateSystem,o=t.getData(),n=ht(t,o),i=0,a=1,r=["x","y"],s=o.getDimensionIndex(o.mapDimension(r[i])),l=Object(j["F"])(o.mapDimensionsAll(r[a]),o.getDimensionIndex,o),c=l[0],u=l[1],d=l[2],p=l[3];if(o.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),!(s<0||l.length<4))return{progress:t.pipelineContext.large?f:h};function h(t,o){var r,l=o.getStore();while(null!=(r=t.next())){var h=l.get(s,r),f=l.get(c,r),g=l.get(u,r),m=l.get(d,r),y=l.get(p,r),b=Math.min(f,g),v=Math.max(f,g),x=S(b,h),_=S(v,h),C=S(m,h),O=S(y,h),w=[];j(w,_,0),j(w,x,1),w.push(I(O),I(_),I(C),I(x)),o.setItemLayout(r,{sign:pt(l,r,f,g,u),initBaseline:f>g?_[a]:x[a],ends:w,brushRect:k(m,y,h)})}function S(t,o){var n=[];return n[i]=o,n[a]=t,isNaN(o)||isNaN(t)?[NaN,NaN]:e.dataToPoint(n)}function j(t,e,o){var a=e.slice(),r=e.slice();a[i]=Object(lt["subPixelOptimize"])(a[i]+n/2,1,!1),r[i]=Object(lt["subPixelOptimize"])(r[i]-n/2,1,!0),o?t.push(a,r):t.push(r,a)}function k(t,e,o){var r=S(t,o),s=S(e,o);return r[i]-=n/2,s[i]-=n/2,{x:r[0],y:r[1],width:a?n:s[0]-r[0],height:a?s[1]-r[1]:n}}function I(t){return t[i]=Object(lt["subPixelOptimize"])(t[i],1),t}}function f(t,o){var n,r,l=new ut(4*t.count),h=0,f=[],g=[],m=o.getStore();while(null!=(r=t.next())){var y=m.get(s,r),b=m.get(c,r),v=m.get(u,r),x=m.get(d,r),_=m.get(p,r);isNaN(y)||isNaN(x)||isNaN(_)?(l[h++]=NaN,h+=3):(l[h++]=pt(m,r,b,v,u),f[i]=y,f[a]=x,n=e.dataToPoint(f,null,g),l[h++]=n?n[0]:NaN,l[h++]=n?n[1]:NaN,f[a]=_,n=e.dataToPoint(f,null,g),l[h++]=n?n[1]:NaN)}o.setLayout("largePoints",l)}}};function pt(t,e,o,n,i){var a;return a=o>n?-1:o<n?1:e>0?t.get(i,e-1)<=n?1:-1:1,a}function ht(t,e){var o,n=t.getBaseAxis(),i="category"===n.type?n.getBandWidth():(o=n.getExtent(),Math.abs(o[1]-o[0])/e.count()),a=Object(ct["m"])(Object(j["M"])(t.get("barMaxWidth"),i),i),r=Object(ct["m"])(Object(j["M"])(t.get("barMinWidth"),1),i),s=t.get("barWidth");return null!=s?Object(ct["m"])(s,i):Math.max(Math.min(i/2,a),r)}var ft=dt;function gt(t){t.registerChartView(Z),t.registerSeriesModel(Q),t.registerPreprocessor(tt),t.registerVisual(st),t.registerLayout(ft)}var mt=o("4cb5"),yt=o("3620"),bt=o("1830"),vt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o.hasSymbolVisual=!0,o}return Object(S["a"])(e,t),e.prototype.getInitialData=function(t,e){return Object(bt["a"])(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,o){return o.point(e.getItemLayout(t))},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(H["a"]),xt=vt,_t=o("f706"),Ct=o("2dc5"),Ot=o("a15a"),wt=o("392f"),St=o("861c"),jt=4,kt=function(){function t(){}return t}(),It=function(t){function e(e){return t.call(this,e)||this}return Object(S["a"])(e,t),e.prototype.getDefaultShape=function(){return new kt},e.prototype.buildPath=function(t,e){var o=e.points,n=e.size,i=this.symbolProxy,a=i.shape,r=t.getContext?t.getContext():t,s=r&&n[0]<jt;if(s)this._ctx=r;else{this._ctx=null;for(var l=0;l<o.length;){var c=o[l++],u=o[l++];isNaN(c)||isNaN(u)||(this.softClipShape&&!this.softClipShape.contain(c,u)||(a.x=c-n[0]/2,a.y=u-n[1]/2,a.width=n[0],a.height=n[1],i.buildPath(t,a,!0)))}}},e.prototype.afterBrush=function(){var t=this.shape,e=t.points,o=t.size,n=this._ctx;if(n)for(var i=0;i<e.length;){var a=e[i++],r=e[i++];isNaN(a)||isNaN(r)||(this.softClipShape&&!this.softClipShape.contain(a,r)||n.fillRect(a-o[0]/2,r-o[1]/2,o[0],o[1]))}},e.prototype.findDataIndex=function(t,e){for(var o=this.shape,n=o.points,i=o.size,a=Math.max(i[0],4),r=Math.max(i[1],4),s=n.length/2-1;s>=0;s--){var l=2*s,c=n[l]-a/2,u=n[l+1]-r/2;if(t>=c&&e>=u&&t<=c+a&&e<=u+r)return s}return-1},e}(M["b"]),At=function(){function t(){this.group=new Ct["a"]}return t.prototype.isPersistent=function(){return!this._incremental},t.prototype.updateData=function(t,e){this.group.removeAll();var o=new It({rectHover:!0,cursor:"default"});o.setShape({points:t.getLayout("points")}),this._setCommon(o,t,!1,e),this.group.add(o),this._incremental=null},t.prototype.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("points");this.group.eachChild((function(t){if(null!=t.startIndex){var o=2*(t.endIndex-t.startIndex),n=4*t.startIndex*2;e=new Float32Array(e.buffer,n,o)}t.setShape("points",e)}))}},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new wt["a"]({silent:!0})),this.group.add(this._incremental)):this._incremental=null},t.prototype.incrementalUpdate=function(t,e,o){var n;this._incremental?(n=new It,this._incremental.addDisplayable(n,!0)):(n=new It({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end}),n.incremental=!0,this.group.add(n)),n.setShape({points:e.getLayout("points")}),this._setCommon(n,e,!!this._incremental,o)},t.prototype._setCommon=function(t,e,o,n){var i=e.hostModel;n=n||{};var a=e.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=n.clipShape||null,t.symbolProxy=Object(Ot["a"])(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var r=t.shape.size[0]<jt;t.useStyle(i.getModel("itemStyle").getItemStyle(r?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;if(l&&t.setColor(l),!o){var c=Object(St["a"])(t);c.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){c.dataIndex=null;var o=t.findDataIndex(e.offsetX,e.offsetY);o>=0&&(c.dataIndex=o+(t.startIndex||0))}))}},t.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},t.prototype._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},t}(),Mt=At,Pt=o("87c3"),Tt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.prototype.render=function(t,e,o){var n=t.getData(),i=this._updateSymbolDraw(n,t);i.updateData(n,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,o){var n=t.getData(),i=this._updateSymbolDraw(n,t);i.incrementalPrepareUpdate(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,o){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,o){var n=t.getData();if(this.group.dirty(),!this._finished||n.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var i=Object(Pt["a"])("").reset(t,e,o);i.progress&&i.progress({start:0,end:n.count(),count:n.count()},n),this._symbolDraw.updateLayout(n)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,o=e&&e.getArea&&e.getArea();return t.get("clip",!0)?o:null},e.prototype._updateSymbolDraw=function(t,e){var o=this._symbolDraw,n=e.pipelineContext,i=n.large;return o&&i===this._isLargeDraw||(o&&o.remove(),o=this._symbolDraw=i?new Mt:new _t["a"],this._isLargeDraw=i,this.group.removeAll()),this.group.add(o.group),o},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(k["a"]),Dt=Tt,Nt=o("8702");function Lt(t){Object(O["a"])(Nt["a"]),t.registerSeriesModel(xt),t.registerChartView(Dt),t.registerLayout(Object(Pt["a"])("scatter"))}var zt=o("af5c"),Rt=o("6cb7"),Bt=o("f934"),Et=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.prototype.init=function(e,o,n){var i=Object(Bt["c"])(e);t.prototype.init.apply(this,arguments),Vt(e,i)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),Vt(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Rt["a"]);function Vt(t,e){var o,n=t.cellSize;o=j["s"](n)?n:t.cellSize=[n,n],1===o.length&&(o[1]=o[0]);var i=j["F"]([0,1],(function(t){return Object(Bt["g"])(e,t)&&(o[t]="auto"),null!=o[t]&&"auto"!==o[t]}));Object(Bt["e"])(t,e,{type:"box",ignoreSize:i})}var Wt=Et,Gt=o("c7a2"),Ft=o("d498"),Zt=o("76a5"),Ht=o("7837"),Ut=o("eda2"),qt=o("b12f"),Yt=o("ef59"),Xt=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.prototype.render=function(t,e,o){var n=this.group;n.removeAll();var i=t.coordinateSystem,a=i.getRangeInfo(),r=i.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,a,n),this._renderLines(t,a,r,n),this._renderYearText(t,a,r,n),this._renderMonthText(t,s,r,n),this._renderWeekText(t,s,a,r,n)},e.prototype._renderDayRect=function(t,e,o){for(var n=t.coordinateSystem,i=t.getModel("itemStyle").getItemStyle(),a=n.getCellWidth(),r=n.getCellHeight(),s=e.start.time;s<=e.end.time;s=n.getNextNDay(s,1).time){var l=n.dataToRect([s],!1).tl,c=new Gt["a"]({shape:{x:l[0],y:l[1],width:a,height:r},cursor:"default",style:i});o.add(c)}},e.prototype._renderLines=function(t,e,o,n){var i=this,a=t.coordinateSystem,r=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=r.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,u=0;c.time<=e.end.time;u++){p(c.formatedDate),0===u&&(c=a.getDateInfo(e.start.y+"-"+e.start.m));var d=c.date;d.setMonth(d.getMonth()+1),c=a.getDateInfo(d)}function p(e){i._firstDayOfMonth.push(a.getDateInfo(e)),i._firstDayPoints.push(a.dataToRect([e],!1).tl);var l=i._getLinePointsOfOneWeek(t,e,o);i._tlpoints.push(l[0]),i._blpoints.push(l[l.length-1]),s&&i._drawSplitline(l,r,n)}p(a.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(i._getEdgesPoints(i._tlpoints,l,o),r,n),s&&this._drawSplitline(i._getEdgesPoints(i._blpoints,l,o),r,n)},e.prototype._getEdgesPoints=function(t,e,o){var n=[t[0].slice(),t[t.length-1].slice()],i="horizontal"===o?0:1;return n[0][i]=n[0][i]-e/2,n[1][i]=n[1][i]+e/2,n},e.prototype._drawSplitline=function(t,e,o){var n=new Ft["a"]({z2:20,shape:{points:t},style:e});o.add(n)},e.prototype._getLinePointsOfOneWeek=function(t,e,o){for(var n=t.coordinateSystem,i=n.getDateInfo(e),a=[],r=0;r<7;r++){var s=n.getNextNDay(i.time,r),l=n.dataToRect([s.time],!1);a[2*s.day]=l.tl,a[2*s.day+1]=l["horizontal"===o?"bl":"tr"]}return a},e.prototype._formatterLabel=function(t,e){return"string"===typeof t&&t?Object(Ut["e"])(t,e):"function"===typeof t?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,o,n,i){var a=e[0],r=e[1],s=["center","bottom"];"bottom"===n?(r+=i,s=["center","top"]):"left"===n?a-=i:"right"===n?(a+=i,s=["center","top"]):r-=i;var l=0;return"left"!==n&&"right"!==n||(l=Math.PI/2),{rotation:l,x:a,y:r,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,o,n){var i=t.getModel("yearLabel");if(i.get("show")){var a=i.get("margin"),r=i.get("position");r||(r="horizontal"!==o?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,c=(s[0][1]+s[1][1])/2,u="horizontal"===o?0:1,d={top:[l,s[u][1]],bottom:[l,s[1-u][1]],left:[s[1-u][0],c],right:[s[u][0],c]},p=e.start.y;+e.end.y>+e.start.y&&(p=p+"-"+e.end.y);var h=i.get("formatter"),f={start:e.start.y,end:e.end.y,nameMap:p},g=this._formatterLabel(h,f),m=new Zt["a"]({z2:30,style:Object(Ht["a"])(i,{text:g})});m.attr(this._yearTextPositionControl(m,d[r],o,r,a)),n.add(m)}},e.prototype._monthTextPositionControl=function(t,e,o,n,i){var a="left",r="top",s=t[0],l=t[1];return"horizontal"===o?(l+=i,e&&(a="center"),"start"===n&&(r="bottom")):(s+=i,e&&(r="middle"),"start"===n&&(a="right")),{x:s,y:l,align:a,verticalAlign:r}},e.prototype._renderMonthText=function(t,e,o,n){var i=t.getModel("monthLabel");if(i.get("show")){var a=i.get("nameMap"),r=i.get("margin"),s=i.get("position"),l=i.get("align"),c=[this._tlpoints,this._blpoints];a&&!Object(j["A"])(a)||(a&&(e=Object(Yt["d"])(a)||e),a=e.get(["time","monthAbbr"])||[]);var u="start"===s?0:1,d="horizontal"===o?0:1;r="start"===s?-r:r;for(var p="center"===l,h=0;h<c[u].length-1;h++){var f=c[u][h].slice(),g=this._firstDayOfMonth[h];if(p){var m=this._firstDayPoints[h];f[d]=(m[d]+c[0][h+1][d])/2}var y=i.get("formatter"),b=a[+g.m-1],v={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:b},x=this._formatterLabel(y,v),_=new Zt["a"]({z2:30,style:Object(j["m"])(Object(Ht["a"])(i,{text:x}),this._monthTextPositionControl(f,p,o,s,r))});n.add(_)}}},e.prototype._weekTextPositionControl=function(t,e,o,n,i){var a="center",r="middle",s=t[0],l=t[1],c="start"===o;return"horizontal"===e?(s=s+n+(c?1:-1)*i[0]/2,a=c?"right":"left"):(l=l+n+(c?1:-1)*i[1]/2,r=c?"bottom":"top"),{x:s,y:l,align:a,verticalAlign:r}},e.prototype._renderWeekText=function(t,e,o,n,i){var a=t.getModel("dayLabel");if(a.get("show")){var r=t.coordinateSystem,s=a.get("position"),l=a.get("nameMap"),c=a.get("margin"),u=r.getFirstDayOfWeek();if(!l||Object(j["A"])(l)){l&&(e=Object(Yt["d"])(l)||e);var d=e.get(["time","dayOfWeekShort"]);l=d||Object(j["F"])(e.get(["time","dayOfWeekAbbr"]),(function(t){return t[0]}))}var p=r.getNextNDay(o.end.time,7-o.lweek).time,h=[r.getCellWidth(),r.getCellHeight()];c=Object(ct["m"])(c,Math.min(h[1],h[0])),"start"===s&&(p=r.getNextNDay(o.start.time,-(7+o.fweek)).time,c=-c);for(var f=0;f<7;f++){var g=r.getNextNDay(p,f),m=r.dataToRect([g.time],!1).center,y=f;y=Math.abs((f+u)%7);var b=new Zt["a"]({z2:30,style:Object(j["m"])(Object(Ht["a"])(a,{text:l[y]}),this._weekTextPositionControl(m,n,s,c,h))});i.add(b)}}},e.type="calendar",e}(qt["a"]),$t=Xt,Jt=864e5,Kt=function(){function t(e,o,n){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){t=ct["l"](t);var e=t.getFullYear(),o=t.getMonth()+1,n=o<10?"0"+o:""+o,i=t.getDate(),a=i<10?"0"+i:""+i,r=t.getDay();return r=Math.abs((r+7-this.getFirstDayOfWeek())%7),{y:e+"",m:n,d:a,day:r,time:t.getTime(),formatedDate:e+"-"+n+"-"+a,date:t}},t.prototype.getNextNDay=function(t,e){return e=e||0,0===e||(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e)),this.getDateInfo(t)},t.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,n=["width","height"],i=this._model.getCellSize().slice(),a=this._model.getBoxLayoutParams(),r="horizontal"===this._orient?[o,7]:[7,o];j["k"]([0,1],(function(t){c(i,t)&&(a[n[t]]=i[t]*r[t])}));var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=Bt["d"](a,s);function c(t,e){return null!=t[e]&&"auto"!==t[e]}j["k"]([0,1],(function(t){c(i,t)||(i[t]=l[n[t]]/r[t])})),this._sw=i[0],this._sh=i[1]},t.prototype.dataToPoint=function(t,e){j["s"](t)&&(t=t[0]),null==e&&(e=!0);var o=this.getDateInfo(t),n=this._rangeInfo,i=o.formatedDate;if(e&&!(o.time>=n.start.time&&o.time<n.end.time+Jt))return[NaN,NaN];var a=o.day,r=this._getRangeInfo([n.start.time,i]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToRect=function(t,e){var o=this.dataToPoint(t,e);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,o=Math.floor((t[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(o,e-1,n):this._getDateByWeeksAndDay(e,o-1,n)},t.prototype.convertToPixel=function(t,e,o){var n=Qt(e);return n===this?n.dataToPoint(o):null},t.prototype.convertFromPixel=function(t,e,o){var n=Qt(e);return n===this?n.pointToData(o):null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(j["s"](e)&&1===e.length&&(e=e[0]),j["s"](e))t=e;else{var o=e.toString();if(/^\d{4}$/.test(o)&&(t=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var n=this.getDateInfo(o),i=n.date;i.setMonth(i.getMonth()+1);var a=this.getNextNDay(i,-1);t=[n.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(t=[o,o])}if(!t)return e;var r=this._getRangeInfo(t);return r.start.time>r.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,o=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];o[0].time>o[1].time&&(e=!0,o.reverse());var n=Math.floor(o[1].time/Jt)-Math.floor(o[0].time/Jt)+1,i=new Date(o[0].time),a=i.getDate(),r=o[1].date.getDate();i.setDate(a+n-1);var s=i.getDate();if(s!==r){var l=i.getTime()-o[1].time>0?1:-1;while((s=i.getDate())!==r&&(i.getTime()-o[1].time)*l>0)n-=l,i.setDate(s-l)}var c=Math.floor((n+o[0].day+6)/7),u=e?1-c:c-1;return e&&o.reverse(),{range:[o[0].formatedDate,o[1].formatedDate],start:o[0],end:o[1],allDay:n,weeks:c,nthWeek:u,fweek:o[0].day,lweek:o[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,o){var n=this._getRangeInfo(o);if(t>n.weeks||0===t&&e<n.fweek||t===n.weeks&&e>n.lweek)return null;var i=7*(t-1)-n.fweek+e,a=new Date(n.start.time);return a.setDate(+n.start.d+i),this.getDateInfo(a)},t.create=function(e,o){var n=[];return e.eachComponent("calendar",(function(i){var a=new t(i,e,o);n.push(a),i.coordinateSystem=a})),e.eachSeries((function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])})),n},t.dimensions=["time","value"],t}();function Qt(t){var e=t.calendarModel,o=t.seriesModel,n=e?e.coordinateSystem:o?o.coordinateSystem:null;return n}var te=Kt;function ee(t){t.registerComponentModel(Wt),t.registerComponentView($t),t.registerCoordinateSystem("calendar",te)}var oe=o("5e81"),ne=o("104d"),ie=o("4b2a"),ae=o("ff32"),re=o("e0d3"),se=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o.layoutMode="box",o}return Object(S["a"])(e,t),e.prototype.init=function(t,e,o){this.mergeDefaultAndTheme(t,o),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,o=e.data||[],n=e.axisType,i=this._names=[];"category"===n?(t=[],Object(j["k"])(o,(function(e,o){var n,a=Object(re["e"])(Object(re["h"])(e),"");Object(j["z"])(e)?(n=Object(j["d"])(e),n.value=o):n=o,t.push(n),i.push(a)}))):t=o;var a={category:"ordinal",time:"time",value:"number"}[n]||"number",r=this._data=new q["a"]([{name:"value",type:a}],this);r.initData(t,i)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Rt["a"]),le=se,ce=o("38a2"),ue=o("8918"),de=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.type="timeline.slider",e.defaultOption=Object(ue["d"])(le.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(le);Object(j["H"])(de,ce["a"].prototype);var pe=de,he=o("9850"),fe=o("1687"),ge=o("cb11"),me=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.type="timeline",e}(qt["a"]),ye=me,be=o("84ce"),ve=function(t){function e(e,o,n,i){var a=t.call(this,e,o,n)||this;return a.type=i||"value",a}return Object(S["a"])(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(be["a"]),xe=ve,_e=o("18c0"),Ce=o("216a"),Oe=o("89e3"),we=o("e86a"),Se=o("217c"),je=Math.PI,ke=Object(re["n"])(),Ie=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,o){if(this.model=t,this.api=o,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var n=this._layout(t,o),i=this._createGroup("_mainGroup"),a=this._createGroup("_labelGroup"),r=this._axis=this._createAxis(n,t);t.formatTooltip=function(t){var e=r.scale.getLabel({value:t});return Object(Se["c"])("nameValue",{noName:!0,value:e})},Object(j["k"])(["AxisLine","AxisTick","Control","CurrentPointer"],(function(e){this["_render"+e](n,i,r,t)}),this),this._renderAxisLabel(n,a,r,t),this._position(n,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var o,n=t.get(["label","position"]),i=t.get("orient"),a=Me(t,e);o=null==n||"auto"===n?"horizontal"===i?a.y+a.height/2<e.getHeight()/2?"-":"+":a.x+a.width/2<e.getWidth()/2?"+":"-":Object(j["A"])(n)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]:n;var r,s,l,c={horizontal:"center",vertical:o>=0||"+"===o?"left":"right"},u={horizontal:o>=0||"+"===o?"top":"bottom",vertical:"middle"},d={horizontal:0,vertical:je/2},p="vertical"===i?a.height:a.width,h=t.getModel("controlStyle"),f=h.get("show",!0),g=f?h.get("itemSize"):0,m=f?h.get("itemGap"):0,y=g+m,b=t.get(["label","rotate"])||0;b=b*je/180;var v=h.get("position",!0),x=f&&h.get("showPlayBtn",!0),_=f&&h.get("showPrevBtn",!0),C=f&&h.get("showNextBtn",!0),O=0,w=p;"left"===v||"bottom"===v?(x&&(r=[0,0],O+=y),_&&(s=[O,0],O+=y),C&&(l=[w-g,0],w-=y)):(x&&(r=[w-g,0],w-=y),_&&(s=[0,0],O+=y),C&&(l=[w-g,0],w-=y));var S=[O,w];return t.get("inverse")&&S.reverse(),{viewRect:a,mainLength:p,orient:i,rotation:d[i],labelRotation:b,labelPosOpt:o,labelAlign:t.get(["label","align"])||c[i],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[i],playPosition:r,prevBtnPosition:s,nextBtnPosition:l,axisExtent:S,controlSize:g,controlGap:m}},e.prototype._position=function(t,e){var o=this._mainGroup,n=this._labelGroup,i=t.viewRect;if("vertical"===t.orient){var a=fe["b"](),r=i.x,s=i.y+i.height;fe["h"](a,a,[-r,-s]),fe["f"](a,a,-je/2),fe["h"](a,a,[r,s]),i=i.clone(),i.applyTransform(a)}var l=m(i),c=m(o.getBoundingRect()),u=m(n.getBoundingRect()),d=[o.x,o.y],p=[n.x,n.y];p[0]=d[0]=l[0][0];var h=t.labelPosOpt;if(null==h||Object(j["A"])(h)){var f="+"===h?0:1;y(d,c,l,1,f),y(p,u,l,1,1-f)}else{f=h>=0?0:1;y(d,c,l,1,f),p[1]=d[1]+h}function g(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function y(t,e,o,n,i){t[n]+=o[n][i]-e[n][i]}o.setPosition(d),n.setPosition(p),o.rotation=n.rotation=t.rotation,g(o),g(n)},e.prototype._createAxis=function(t,e){var o=e.getData(),n=e.get("axisType"),i=Ae(e,n);i.getTicks=function(){return o.mapArray(["value"],(function(t){return{value:t}}))};var a=o.getDataExtent("value");i.setExtent(a[0],a[1]),i.niceTicks();var r=new xe("value",i,t.axisExtent,n);return r.model=e,r},e.prototype._createGroup=function(t){var e=this[t]=new Ct["a"];return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,o,n){var i=o.getExtent();if(n.get(["lineStyle","show"])){var a=new ge["a"]({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:Object(j["m"])({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(a);var r=this._progressLine=new ge["a"]({shape:{x1:i[0],x2:this._currentPointer?this._currentPointer.x:i[0],y1:0,y2:0},style:Object(j["j"])({lineCap:"round",lineWidth:a.style.lineWidth},n.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(r)}},e.prototype._renderAxisTick=function(t,e,o,n){var i=this,a=n.getData(),r=o.scale.getTicks();this._tickSymbols=[],Object(j["k"])(r,(function(t){var r=o.dataToCoord(t.value),s=a.getItemModel(t.value),l=s.getModel("itemStyle"),c=s.getModel(["emphasis","itemStyle"]),u=s.getModel(["progress","itemStyle"]),d={x:r,y:0,onclick:Object(j["c"])(i._changeTimeline,i,t.value)},p=Te(s,l,e,d);p.ensureState("emphasis").style=c.getItemStyle(),p.ensureState("progress").style=u.getItemStyle(),Object(A["m"])(p);var h=Object(St["a"])(p);s.get("tooltip")?(h.dataIndex=t.value,h.dataModel=n):h.dataIndex=h.dataModel=null,i._tickSymbols.push(p)}))},e.prototype._renderAxisLabel=function(t,e,o,n){var i=this,a=o.getLabelModel();if(a.get("show")){var r=n.getData(),s=o.getViewLabels();this._tickLabels=[],Object(j["k"])(s,(function(n){var a=n.tickValue,s=r.getItemModel(a),l=s.getModel("label"),c=s.getModel(["emphasis","label"]),u=s.getModel(["progress","label"]),d=o.dataToCoord(n.tickValue),p=new Zt["a"]({x:d,y:0,rotation:t.labelRotation-t.rotation,onclick:Object(j["c"])(i._changeTimeline,i,a),silent:!1,style:Object(Ht["a"])(l,{text:n.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});p.ensureState("emphasis").style=Object(Ht["a"])(c),p.ensureState("progress").style=Object(Ht["a"])(u),e.add(p),Object(A["m"])(p),ke(p).dataIndex=a,i._tickLabels.push(p)}))}},e.prototype._renderControl=function(t,e,o,n){var i=t.controlSize,a=t.rotation,r=n.getModel("controlStyle").getItemStyle(),s=n.getModel(["emphasis","controlStyle"]).getItemStyle(),l=n.getPlayState(),c=n.get("inverse",!0);function u(t,o,l,c){if(t){var u=Object(we["h"])(Object(j["M"])(n.get(["controlStyle",o+"BtnSize"]),i),i),d=[0,-u/2,u,u],p=Pe(n,o+"Icon",d,{x:t[0],y:t[1],originX:i/2,originY:0,rotation:c?-a:0,rectHover:!0,style:r,onclick:l});p.ensureState("emphasis").style=s,e.add(p),Object(A["m"])(p)}}u(t.nextBtnPosition,"next",Object(j["c"])(this._changeTimeline,this,c?"-":"+")),u(t.prevBtnPosition,"prev",Object(j["c"])(this._changeTimeline,this,c?"+":"-")),u(t.playPosition,l?"stop":"play",Object(j["c"])(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,o,n){var i=n.getData(),a=n.getCurrentIndex(),r=i.getItemModel(a).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=Object(j["c"])(s._handlePointerDrag,s),t.ondragend=Object(j["c"])(s._handlePointerDragend,s),De(t,s._progressLine,a,o,n,!0)},onUpdate:function(t){De(t,s._progressLine,a,o,n)}};this._currentPointer=Te(r,r,this._mainGroup,{},this._currentPointer,l)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var o=this._toAxisCoord(t)[0],n=this._axis,i=ct["b"](n.getExtent().slice());o>i[1]&&(o=i[1]),o<i[0]&&(o=i[0]),this._currentPointer.x=o,this._currentPointer.markRedraw(),this._progressLine.shape.x2=o,this._progressLine.dirty();var a=this._findNearestTick(o),r=this.model;(e||a!==r.getCurrentIndex()&&r.get("realtime"))&&this._changeTimeline(a)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var e=this._mainGroup.getLocalTransform();return lt["applyTransform"](t,e,!0)},e.prototype._findNearestTick=function(t){var e,o=this.model.getData(),n=1/0,i=this._axis;return o.each(["value"],(function(o,a){var r=i.dataToCoord(o),s=Math.abs(r-t);s<n&&(n=s,e=a)})),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,o=this._tickLabels;if(e)for(var n=0;n<e.length;n++)e&&e[n]&&e[n].toggleState("progress",n<t);if(o)for(n=0;n<o.length;n++)o&&o[n]&&o[n].toggleState("progress",ke(o[n]).dataIndex<=t)},e.type="timeline.slider",e}(ye);function Ae(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new _e["a"]({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new Ce["a"]({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new Oe["a"]}}function Me(t,e){return Bt["d"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function Pe(t,e,o,n){var i=n.style,a=lt["createIcon"](t.get(["controlStyle",e]),n||{},new he["a"](o[0],o[1],o[2],o[3]));return i&&a.setStyle(i),a}function Te(t,e,o,n,i,a){var r=e.get("color");if(i)i.setColor(r),o.add(i),a&&a.onUpdate(i);else{var s=t.get("symbol");i=Object(Ot["a"])(s,-1,-1,2,2,r),i.setStyle("strokeNoScale",!0),o.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),n=Object(j["G"])({rectHover:!0,z2:100},n,!0);var c=Object(Ot["c"])(t.get("symbolSize"));n.scaleX=c[0]/2,n.scaleY=c[1]/2;var u=Object(Ot["b"])(t.get("symbolOffset"),c);u&&(n.x=(n.x||0)+u[0],n.y=(n.y||0)+u[1]);var d=t.get("symbolRotate");return n.rotation=(d||0)*Math.PI/180||0,i.attr(n),i.updateTransform(),i}function De(t,e,o,n,i,a){if(!t.dragging){var r=i.getModel("checkpointStyle"),s=n.dataToCoord(i.getData().get("value",o));if(a||!r.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:r.get("animationDuration",!0),easing:r.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}var Ne=Ie;function Le(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(t,e,o){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.getPlayState()&&(n.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Object(j["j"])({currentIndex:n.option.currentIndex},t)})),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(t,e){var o=e.getComponent("timeline");o&&null!=t.playState&&o.setPlayState(t.playState)}))}function ze(t){var e=t&&t.timeline;j["s"](e)||(e=e?[e]:[]),j["k"](e,(function(t){t&&Re(t)}))}function Re(t){var e=t.type,o={number:"value",time:"time"};if(o[e]&&(t.axisType=o[e],delete t.type),Be(t),Ee(t,"controlPosition")){var n=t.controlStyle||(t.controlStyle={});Ee(n,"position")||(n.position=t.controlPosition),"none"!==n.position||Ee(n,"show")||(n.show=!1,delete n.position),delete t.controlPosition}j["k"](t.data||[],(function(t){j["z"](t)&&!j["s"](t)&&(!Ee(t,"value")&&Ee(t,"name")&&(t.value=t.name),Be(t))}))}function Be(t){var e=t.itemStyle||(t.itemStyle={}),o=e.emphasis||(e.emphasis={}),n=t.label||t.label||{},i=n.normal||(n.normal={}),a={normal:1,emphasis:1};j["k"](n,(function(t,e){a[e]||Ee(i,e)||(i[e]=t)})),o.label&&!Ee(n,"emphasis")&&(n.emphasis=o.label,delete o.label)}function Ee(t,e){return t.hasOwnProperty(e)}function Ve(t){t.registerComponentModel(pe),t.registerComponentView(Ne),t.registerSubTypeDefaulter("timeline",(function(){return"slider"})),Le(t),t.registerPreprocessor(ze)}var We=o("9394"),Ge=o("3a56"),Fe=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.type="dataZoom.select",e}(Ge["a"]),Ze=Fe,He=o("7dcf"),Ue=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.type="dataZoom.select",e}(He["a"]),qe=Ue,Ye=o("1459");function Xe(t){t.registerComponentModel(Ze),t.registerComponentView(qe),Object(Ye["a"])(t)}var $e=function(){function t(){}return t}(),Je={};function Ke(t,e){Je[t]=e}function Qe(t){return Je[t]}var to=function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.type=e.type,o}return Object(S["a"])(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;j["k"](this.option.feature,(function(t,o){var n=Qe(o);n&&(n.getDefaultOption&&(n.defaultOption=n.getDefaultOption(e)),j["G"](t,n.defaultOption))}))},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Rt["a"]),eo=to,oo=o("4319"),no=o("80f0"),io=o("7919"),ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S["a"])(e,t),e.prototype.render=function(t,e,o,n){var i=this.group;if(i.removeAll(),t.get("show")){var a=+t.get("itemSize"),r=t.get("feature")||{},s=this._features||(this._features={}),l=[];j["k"](r,(function(t,e){l.push(e)})),new no["a"](this._featureNames||[],l).add(c).update(c).remove(j["i"](c,null)).execute(),this._featureNames=l,io["a"](i,t,o),i.add(io["b"](i.getBoundingRect(),t)),i.eachChild((function(t){var e=t.__title,n=t.ensureState("emphasis"),r=n.textConfig||(n.textConfig={}),s=t.getTextContent(),l=s&&s.states.emphasis;if(l&&!j["v"](l)&&e){var c=l.style||(l.style={}),u=we["e"](e,Zt["a"].makeFont(c)),d=t.x+i.x,p=t.y+i.y+a,h=!1;p+u.height>o.getHeight()&&(r.position="top",h=!0);var f=h?-5-u.height:a+8;d+u.width/2>o.getWidth()?(r.position=["100%",f],c.align="right"):d-u.width/2<0&&(r.position=[0,f],c.align="left")}}))}function c(i,a){var c,d=l[i],p=l[a],h=r[d],f=new oo["a"](h,t,t.ecModel);if(n&&null!=n.newTitle&&n.featureName===d&&(h.title=n.newTitle),d&&!p){if(ro(d))c={onclick:f.option.onclick,featureName:d};else{var g=Qe(d);if(!g)return;c=new g}s[d]=c}else if(c=s[p],!c)return;c.uid=Object(ue["c"])("toolbox-feature"),c.model=f,c.ecModel=e,c.api=o;var m=c instanceof $e;d||!p?!f.get("show")||m&&c.unusable?m&&c.remove&&c.remove(e,o):(u(f,c,d),f.setIconStatus=function(t,e){var o=this.option,n=this.iconPaths;o.iconStatus=o.iconStatus||{},o.iconStatus[t]=e,n[t]&&("emphasis"===e?A["o"]:A["z"])(n[t])},c instanceof $e&&c.render&&c.render(f,e,o,n)):m&&c.dispose&&c.dispose(e,o)}function u(n,r,s){var l,c,u=n.getModel("iconStyle"),d=n.getModel(["emphasis","iconStyle"]),p=r instanceof $e&&r.getIcons?r.getIcons():n.get("icon"),h=n.get("title")||{};"string"===typeof p?(l={},l[s]=p):l=p,"string"===typeof h?(c={},c[s]=h):c=h;var f=n.iconPaths={};j["k"](l,(function(s,l){var p=lt["createIcon"](s,{},{x:-a/2,y:-a/2,width:a,height:a});p.setStyle(u.getItemStyle());var h=p.ensureState("emphasis");h.style=d.getItemStyle();var g=new Zt["a"]({style:{text:c[l],align:d.get("textAlign"),borderRadius:d.get("textBorderRadius"),padding:d.get("textPadding"),fill:null},ignore:!0});p.setTextContent(g),lt["setTooltipConfig"]({el:p,componentModel:t,itemName:l,formatterParamsExtra:{title:c[l]}}),p.__title=c[l],p.on("mouseover",(function(){var e=d.getItemStyle(),o="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";g.setStyle({fill:d.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:d.get("textBackgroundColor")}),p.setTextConfig({position:d.get("textPosition")||o}),g.ignore=!t.get("showTitle"),Object(A["o"])(this)})).on("mouseout",(function(){"emphasis"!==n.get(["iconStatus",l])&&Object(A["z"])(this),g.hide()})),("emphasis"===n.get(["iconStatus",l])?A["o"]:A["z"])(p),i.add(p),p.on("click",j["c"](r.onclick,r,e,o,l)),f[l]=p}))}},e.prototype.updateView=function(t,e,o,n){j["k"](this._features,(function(t){t instanceof $e&&t.updateView&&t.updateView(t.model,e,o,n)}))},e.prototype.remove=function(t,e){j["k"](this._features,(function(o){o instanceof $e&&o.remove&&o.remove(t,e)})),this.group.removeAll()},e.prototype.dispose=function(t,e){j["k"](this._features,(function(o){o instanceof $e&&o.dispose&&o.dispose(t,e)}))},e.type="toolbox",e}(qt["a"]);function ro(t){return 0===t.indexOf("my")}var so=ao,lo=o("22d1"),co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S["a"])(e,t),e.prototype.onclick=function(t,e){var o=this.model,n=o.get("name")||t.get("title.0.text")||"echarts",i="svg"===e.getZr().painter.getType(),a=i?"svg":o.get("type",!0)||"png",r=e.getConnectedDataURL({type:a,backgroundColor:o.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")});if("function"!==typeof MouseEvent||!lo["a"].browser.newEdge&&(lo["a"].browser.ie||lo["a"].browser.edge))if(window.navigator.msSaveOrOpenBlob||i){var s=r.split(","),l=s[0].indexOf("base64")>-1,c=i?decodeURIComponent(s[1]):s[1];l&&(c=window.atob(c));var u=n+"."+a;if(window.navigator.msSaveOrOpenBlob){var d=c.length,p=new Uint8Array(d);while(d--)p[d]=c.charCodeAt(d);var h=new Blob([p]);window.navigator.msSaveOrOpenBlob(h,u)}else{var f=document.createElement("iframe");document.body.appendChild(f);var g=f.contentWindow,m=g.document;m.open("image/svg+xml","replace"),m.write(c),m.close(),g.focus(),m.execCommand("SaveAs",!0,u),document.body.removeChild(f)}}else{var y=o.get("lang"),b='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',v=window.open();v.document.write(b),v.document.title=n}else{var x=document.createElement("a");x.download=n+"."+a,x.target="_blank",x.href=r;var _=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});x.dispatchEvent(_)}},e.getDefaultOption=function(t){var e={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return e},e}($e);co.prototype.unusable=!lo["a"].canvasSupported;var uo=co,po=o("1be7"),ho="__ec_magicType_stack__",fo=[["line","bar"],["stack"]],go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S["a"])(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),o={};return j["k"](t.get("type"),(function(t){e[t]&&(o[t]=e[t])})),o},e.getDefaultOption=function(t){var e={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return e},e.prototype.onclick=function(t,e,o){var n=this.model,i=n.get(["seriesIndex",o]);if(mo[o]){var a,r={series:[]},s=function(t){var e=t.subType,i=t.id,a=mo[o](e,i,t,n);a&&(j["j"](a,t.option),r.series.push(a));var s=t.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===o||"bar"===o)){var l=s.getAxesByScale("ordinal")[0];if(l){var c=l.dim,u=c+"Axis",d=t.getReferringComponents(u,re["b"]).models[0],p=d.componentIndex;r[u]=r[u]||[];for(var h=0;h<=p;h++)r[u][p]=r[u][p]||{};r[u][p].boundaryGap="bar"===o}}};j["k"](fo,(function(t){j["q"](t,o)>=0&&j["k"](t,(function(t){n.setIconStatus(t,"normal")}))})),n.setIconStatus(o,"emphasis"),t.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},s);var l=o;"stack"===o&&(a=j["G"]({stack:n.option.title.tiled,tiled:n.option.title.stack},n.option.title),"emphasis"!==n.get(["iconStatus",o])&&(l="tiled")),e.dispatchAction({type:"changeMagicType",currentType:l,newOption:r,newTitle:a,featureName:"magicType"})}},e}($e),mo={line:function(t,e,o,n){if("bar"===t)return j["G"]({id:e,type:"line",data:o.get("data"),stack:o.get("stack"),markPoint:o.get("markPoint"),markLine:o.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(t,e,o,n){if("line"===t)return j["G"]({id:e,type:"bar",data:o.get("data"),stack:o.get("stack"),markPoint:o.get("markPoint"),markLine:o.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(t,e,o,n){var i=o.get("stack")===ho;if("line"===t||"bar"===t)return n.setIconStatus("stack",i?"normal":"emphasis"),j["G"]({id:e,stack:i?"":ho},n.get(["option","stack"])||{},!0)}};po["c"]({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(t,e){e.mergeOption(t.newOption)}));var yo=go,bo=o("607d"),vo=new Array(60).join("-"),xo="\t";function _o(t){var e={},o=[],n=[];return t.eachRawSeries((function(t){var i=t.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)o.push(t);else{var a=i.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;e[r]||(e[r]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},n.push({axisDim:a.dim,axisIndex:a.index})),e[r].series.push(t)}else o.push(t)}})),{seriesGroupByCategoryAxis:e,other:o,meta:n}}function Co(t){var e=[];return j["k"](t,(function(t,o){var n=t.categoryAxis,i=t.valueAxis,a=i.dim,r=[" "].concat(j["F"](t.series,(function(t){return t.name}))),s=[n.model.getCategories()];j["k"](t.series,(function(t){var e=t.getRawData();s.push(t.getRawData().mapArray(e.mapDimension(a),(function(t){return t})))}));for(var l=[r.join(xo)],c=0;c<s[0].length;c++){for(var u=[],d=0;d<s.length;d++)u.push(s[d][c]);l.push(u.join(xo))}e.push(l.join("\n"))})),e.join("\n\n"+vo+"\n\n")}function Oo(t){return j["F"](t,(function(t){var e=t.getRawData(),o=[t.name],n=[];return e.each(e.dimensions,(function(){for(var t=arguments.length,i=arguments[t-1],a=e.getName(i),r=0;r<t-1;r++)n[r]=arguments[r];o.push((a?a+xo:"")+n.join(xo))})),o.join("\n")})).join("\n\n"+vo+"\n\n")}function wo(t){var e=_o(t);return{value:j["n"]([Co(e.seriesGroupByCategoryAxis),Oo(e.other)],(function(t){return!!t.replace(/[\n\t\s]/g,"")})).join("\n\n"+vo+"\n\n"),meta:e.meta}}function So(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function jo(t){var e=t.slice(0,t.indexOf("\n"));if(e.indexOf(xo)>=0)return!0}var ko=new RegExp("["+xo+"]+","g");function Io(t){for(var e=t.split(/\n+/g),o=So(e.shift()).split(ko),n=[],i=j["F"](o,(function(t){return{name:t,data:[]}})),a=0;a<e.length;a++){var r=So(e[a]).split(ko);n.push(r.shift());for(var s=0;s<r.length;s++)i[s]&&(i[s].data[a]=r[s])}return{series:i,categories:n}}function Ao(t){for(var e=t.split(/\n+/g),o=So(e.shift()),n=[],i=0;i<e.length;i++){var a=So(e[i]);if(a){var r=a.split(ko),s="",l=void 0,c=!1;isNaN(r[0])?(c=!0,s=r[0],r=r.slice(1),n[i]={name:s,value:[]},l=n[i].value):l=n[i]=[];for(var u=0;u<r.length;u++)l.push(+r[u]);1===l.length&&(c?n[i].value=l[0]:n[i]=l[0])}}return{name:o,data:n}}function Mo(t,e){var o=t.split(new RegExp("\n*"+vo+"\n*","g")),n={series:[]};return j["k"](o,(function(t,o){if(jo(t)){var i=Io(t),a=e[o],r=a.axisDim+"Axis";a&&(n[r]=n[r]||[],n[r][a.axisIndex]={data:i.categories},n.series=n.series.concat(i.series))}else{i=Ao(t);n.series.push(i)}})),n}var Po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S["a"])(e,t),e.prototype.onclick=function(t,e){var o=e.getDom(),n=this.model;this._dom&&o.removeChild(this._dom);var i=document.createElement("div");i.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",i.style.backgroundColor=n.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=n.get("lang")||[];a.innerHTML=r[0]||n.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=n.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var c=n.get("optionToContent"),u=n.get("contentToOption"),d=wo(t);if("function"===typeof c){var p=c(e.getOption());"string"===typeof p?s.innerHTML=p:j["u"](p)&&s.appendChild(p)}else s.appendChild(l),l.readOnly=n.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=n.get("textColor"),l.style.borderColor=n.get("textareaBorderColor"),l.style.backgroundColor=n.get("textareaColor"),l.value=d.value;var h=d.meta,f=document.createElement("div");f.style.cssText="position:absolute;bottom:0;left:0;right:0;";var g="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),y=document.createElement("div");g+=";background-color:"+n.get("buttonColor"),g+=";color:"+n.get("buttonTextColor");var b=this;function v(){o.removeChild(i),b._dom=null}Object(bo["a"])(m,"click",v),Object(bo["a"])(y,"click",(function(){if(null==u&&null!=c||null!=u&&null==c)v();else{var t;try{t="function"===typeof u?u(s,e.getOption()):Mo(l.value,h)}catch(o){throw v(),new Error("Data view format error "+o)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),v()}})),m.innerHTML=r[1],y.innerHTML=r[2],y.style.cssText=g,m.style.cssText=g,!n.get("readOnly")&&f.appendChild(y),f.appendChild(m),i.appendChild(a),i.appendChild(s),i.appendChild(f),s.style.height=o.clientHeight-80+"px",o.appendChild(i),this._dom=i},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){var e={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return e},e}($e);function To(t,e){return j["F"](t,(function(t,o){var n=e&&e[o];if(j["z"](n)&&!j["s"](n)){var i=j["z"](t)&&!j["s"](t);i||(t={value:t});var a=null!=n.name&&null==t.name;return t=j["j"](t,n),a&&delete t.name,t}return t}))}po["c"]({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(t,e){var o=[];j["k"](t.newOption.series,(function(t){var n=e.getSeriesByName(t.name)[0];if(n){var i=n.get("data");o.push({name:t.name,data:To(t.data,i)})}else o.push(j["m"]({type:"scatter"},t))})),e.mergeOption(j["j"]({series:o},t.newOption))}));var Do=Po,No=j["k"],Lo=Object(re["n"])();function zo(t,e){var o=Vo(t);No(e,(function(e,n){for(var i=o.length-1;i>=0;i--){var a=o[i];if(a[n])break}if(i<0){var r=t.queryComponents({mainType:"dataZoom",subType:"select",id:n})[0];if(r){var s=r.getPercentRange();o[0][n]={dataZoomId:n,start:s[0],end:s[1]}}}})),o.push(e)}function Ro(t){var e=Vo(t),o=e[e.length-1];e.length>1&&e.pop();var n={};return No(o,(function(t,o){for(var i=e.length-1;i>=0;i--)if(t=e[i][o],t){n[o]=t;break}})),n}function Bo(t){Lo(t).snapshots=null}function Eo(t){return Vo(t).length}function Vo(t){var e=Lo(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S["a"])(e,t),e.prototype.onclick=function(t,e){Bo(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var e={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return e},e}($e);po["c"]({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(t,e){e.resetOption("recreate")}));var Go=Wo,Fo=o("6fd3"),Zo=o("87b1"),Ho=o("a4fe"),Uo=!0,qo=Math.min,Yo=Math.max,Xo=Math.pow,$o=1e4,Jo=6,Ko=6,Qo="globalPan",tn={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},en={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},on={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},nn=0,an=function(t){function e(e){var o=t.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=e,o.group=new Ct["a"],o._uid="brushController_"+nn++,Object(j["k"])(Rn,(function(t,e){this._handlers[e]=Object(j["c"])(t,this)}),o),o}return Object(S["a"])(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||Ho["c"](e,Qo,this._uid),Object(j["k"])(this._handlers,(function(t,o){e.on(o,t)})),this._brushType=t.brushType,this._brushOption=Object(j["G"])(Object(j["d"])(on),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;Ho["b"](t,Qo,this._uid),Object(j["k"])(this._handlers,(function(e,o){t.off(o,e)})),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};Object(j["k"])(t,(function(t){e[t.panelId]=Object(j["d"])(t)}))}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Object(j["F"])(t,(function(t){return Object(j["G"])(Object(j["d"])(on),t,!0)}));var e="\0-brush-index-",o=this._covers,n=this._covers=[],i=this,a=this._creatingCover;return new no["a"](o,t,s,r).add(l).update(l).remove(c).execute(),this;function r(t,o){return(null!=t.id?t.id:e+o)+"-"+t.brushType}function s(t,e){return r(t.__brushOption,e)}function l(e,r){var s=t[e];if(null!=r&&o[r]===a)n[e]=o[r];else{var l=n[e]=null!=r?(o[r].__brushOption=s,o[r]):sn(i,rn(i,s));un(i,l)}}function c(t){o[t]!==a&&i.group.remove(o[t])}},e.prototype.unmount=function(){return this.enableBrush(!1),fn(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Fo["a"]);function rn(t,e){var o=Vn[e.brushType].createCover(t,e);return o.__brushOption=e,cn(o,e),t.group.add(o),o}function sn(t,e){var o=dn(e);return o.endCreating&&(o.endCreating(t,e),cn(e,e.__brushOption)),e}function ln(t,e){var o=e.__brushOption;dn(e).updateCoverShape(t,e,o.range,o)}function cn(t,e){var o=e.z;null==o&&(o=$o),t.traverse((function(t){t.z=o,t.z2=o}))}function un(t,e){dn(e).updateCommon(t,e),ln(t,e)}function dn(t){return Vn[t.__brushOption.brushType]}function pn(t,e,o){var n,i=t._panels;if(!i)return Uo;var a=t._transform;return Object(j["k"])(i,(function(t){t.isTargetByCursor(e,o,a)&&(n=t)})),n}function hn(t,e){var o=t._panels;if(!o)return Uo;var n=e.__brushOption.panelId;return null!=n?o[n]:Uo}function fn(t){var e=t._covers,o=e.length;return Object(j["k"])(e,(function(e){t.group.remove(e)}),t),e.length=0,!!o}function gn(t,e){var o=Object(j["F"])(t._covers,(function(t){var e=t.__brushOption,o=Object(j["d"])(e.range);return{brushType:e.brushType,panelId:e.panelId,range:o}}));t.trigger("brush",{areas:o,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function mn(t){var e=t._track;if(!e.length)return!1;var o=e[e.length-1],n=e[0],i=o[0]-n[0],a=o[1]-n[1],r=Xo(i*i+a*a,.5);return r>Jo}function yn(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function bn(t,e,o,n){var i=new Ct["a"];return i.add(new Gt["a"]({name:"main",style:Cn(o),silent:!0,draggable:!0,cursor:"move",drift:Object(j["i"])(kn,t,e,i,["n","s","w","e"]),ondragend:Object(j["i"])(gn,e,{isEnd:!0})})),Object(j["k"])(n,(function(o){i.add(new Gt["a"]({name:o.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Object(j["i"])(kn,t,e,i,o),ondragend:Object(j["i"])(gn,e,{isEnd:!0})}))})),i}function vn(t,e,o,n){var i=n.brushStyle.lineWidth||0,a=Yo(i,Ko),r=o[0][0],s=o[1][0],l=r-i/2,c=s-i/2,u=o[0][1],d=o[1][1],p=u-a+i/2,h=d-a+i/2,f=u-r,g=d-s,m=f+i,y=g+i;_n(t,e,"main",r,s,f,g),n.transformable&&(_n(t,e,"w",l,c,a,y),_n(t,e,"e",p,c,a,y),_n(t,e,"n",l,c,m,a),_n(t,e,"s",l,h,m,a),_n(t,e,"nw",l,c,a,a),_n(t,e,"ne",p,c,a,a),_n(t,e,"sw",l,h,a,a),_n(t,e,"se",p,h,a,a))}function xn(t,e){var o=e.__brushOption,n=o.transformable,i=e.childAt(0);i.useStyle(Cn(o)),i.attr({silent:!n,cursor:n?"move":"default"}),Object(j["k"])([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(o){var i=e.childOfName(o.join("")),a=1===o.length?Sn(t,o[0]):jn(t,o);i&&i.attr({silent:!n,invisible:!n,cursor:n?en[a]+"-resize":null})}))}function _n(t,e,o,n,i,a,r){var s=e.childOfName(o);s&&s.setShape(Pn(Mn(t,e,[[n,i],[n+a,i+r]])))}function Cn(t){return Object(j["j"])({strokeNoScale:!0},t.brushStyle)}function On(t,e,o,n){var i=[qo(t,o),qo(e,n)],a=[Yo(t,o),Yo(e,n)];return[[i[0],a[0]],[i[1],a[1]]]}function wn(t){return lt["getTransform"](t.group)}function Sn(t,e){var o={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},i=lt["transformDirection"](o[e],wn(t));return n[i]}function jn(t,e){var o=[Sn(t,e[0]),Sn(t,e[1])];return("e"===o[0]||"w"===o[0])&&o.reverse(),o.join("")}function kn(t,e,o,n,i,a){var r=o.__brushOption,s=t.toRectRange(r.range),l=An(e,i,a);Object(j["k"])(n,(function(t){var e=tn[t];s[e[0]][e[1]]+=l[e[0]]})),r.range=t.fromRectRange(On(s[0][0],s[1][0],s[0][1],s[1][1])),un(e,o),gn(e,{isEnd:!1})}function In(t,e,o,n){var i=e.__brushOption.range,a=An(t,o,n);Object(j["k"])(i,(function(t){t[0]+=a[0],t[1]+=a[1]})),un(t,e),gn(t,{isEnd:!1})}function An(t,e,o){var n=t.group,i=n.transformCoordToLocal(e,o),a=n.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function Mn(t,e,o){var n=hn(t,e);return n&&n!==Uo?n.clipPath(o,t._transform):Object(j["d"])(o)}function Pn(t){var e=qo(t[0][0],t[1][0]),o=qo(t[0][1],t[1][1]),n=Yo(t[0][0],t[1][0]),i=Yo(t[0][1],t[1][1]);return{x:e,y:o,width:n-e,height:i-o}}function Tn(t,e,o){if(t._brushType&&!En(t,e.offsetX,e.offsetY)){var n=t._zr,i=t._covers,a=pn(t,e,o);if(!t._dragging)for(var r=0;r<i.length;r++){var s=i[r].__brushOption;if(a&&(a===Uo||s.panelId===a.panelId)&&Vn[s.brushType].contain(i[r],o[0],o[1]))return}a&&n.setCursorStyle("crosshair")}}function Dn(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Nn(t,e,o){return t.childOfName("main").contain(e,o)}function Ln(t,e,o,n){var i,a=t._creatingCover,r=t._creatingPanel,s=t._brushOption;if(t._track.push(o.slice()),mn(t)||a){if(r&&!a){"single"===s.brushMode&&fn(t);var l=Object(j["d"])(s);l.brushType=zn(l.brushType,r),l.panelId=r===Uo?null:r.panelId,a=t._creatingCover=rn(t,l),t._covers.push(a)}if(a){var c=Vn[zn(t._brushType,r)],u=a.__brushOption;u.range=c.getCreatingRange(Mn(t,a,t._track)),n&&(sn(t,a),c.updateCommon(t,a)),ln(t,a),i={isEnd:n}}}else n&&"single"===s.brushMode&&s.removeOnClick&&pn(t,e,o)&&fn(t)&&(i={isEnd:n,removeOnClick:!0});return i}function zn(t,e){return"auto"===t?e.defaultBrushType:t}var Rn={mousedown:function(t){if(this._dragging)Bn(this,t);else if(!t.target||!t.target.draggable){Dn(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var o=this._creatingPanel=pn(this,t,e);o&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,o=t.offsetY,n=this.group.transformCoordToLocal(e,o);if(Tn(this,t,n),this._dragging){Dn(t);var i=Ln(this,t,n,!1);i&&gn(this,i)}},mouseup:function(t){Bn(this,t)}};function Bn(t,e){if(t._dragging){Dn(e);var o=e.offsetX,n=e.offsetY,i=t.group.transformCoordToLocal(o,n),a=Ln(t,e,i,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&gn(t,a)}}function En(t,e,o){var n=t._zr;return e<0||e>n.getWidth()||o<0||o>n.getHeight()}var Vn={lineX:Wn(0),lineY:Wn(1),rect:{createCover:function(t,e){function o(t){return t}return bn({toRectRange:o,fromRectRange:o},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=yn(t);return On(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,o,n){vn(t,e,o,n)},updateCommon:xn,contain:Nn},polygon:{createCover:function(t,e){var o=new Ct["a"];return o.add(new Ft["a"]({name:"main",style:Cn(e),silent:!0})),o},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Zo["a"]({name:"main",draggable:!0,drift:Object(j["i"])(In,t,e),ondragend:Object(j["i"])(gn,t,{isEnd:!0})}))},updateCoverShape:function(t,e,o,n){e.childAt(0).setShape({points:Mn(t,e,o)})},updateCommon:xn,contain:Nn}};function Wn(t){return{createCover:function(e,o){return bn({toRectRange:function(e){var o=[e,[0,100]];return t&&o.reverse(),o},fromRectRange:function(e){return e[t]}},e,o,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var o=yn(e),n=qo(o[0][t],o[1][t]),i=Yo(o[0][t],o[1][t]);return[n,i]},updateCoverShape:function(e,o,n,i){var a,r=hn(e,o);if(r!==Uo&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[n,a];t&&l.reverse(),vn(e,o,l,i)},updateCommon:xn,contain:Nn}}var Gn=an,Fn={axisPointer:1,tooltip:1,brush:1};function Zn(t,e,o){var n=e.getComponentByElement(t.topTarget),i=n&&n.coordinateSystem;return n&&n!==o&&!Fn.hasOwnProperty(n.mainType)&&i&&i.model!==o}function Hn(t){return t=Yn(t),function(e){return lt["clipPointsByRect"](e,t)}}function Un(t,e){return t=Yn(t),function(o){var n=null!=e?e:o,i=n?t.width:t.height,a=n?t.x:t.y;return[a,a+(i||0)]}}function qn(t,e,o){var n=Yn(t);return function(t,i){return n.contain(i[0],i[1])&&!Zn(t,e,o)}}function Yn(t){return he["a"].create(t)}var Xn=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],$n=function(){function t(t,e,o){var n=this;this._targetInfoList=[];var i=Kn(e,t);Object(j["k"])(Qn,(function(t,e){(!o||!o.include||Object(j["q"])(o.include,e)>=0)&&t(i,n._targetInfoList)}))}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,(function(t,e,o){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var n=oi[t.brushType](0,o,e);t.__rangeOffset={offset:ii[t.brushType](n.values,t.range,[1,1]),xyMinMax:n.xyMinMax}}})),t},t.prototype.matchOutputRanges=function(t,e,o){Object(j["k"])(t,(function(t){var n=this.findTargetInfo(t,e);n&&!0!==n&&Object(j["k"])(n.coordSyses,(function(n){var i=oi[t.brushType](1,n,t.range,!0);o(t,i.values,n,e)}))}),this)},t.prototype.setInputRanges=function(t,e){Object(j["k"])(t,(function(t){var o=this.findTargetInfo(t,e);if(t.range=t.range||[],o&&!0!==o){t.panelId=o.panelId;var n=oi[t.brushType](0,o.coordSys,t.coordRange),i=t.__rangeOffset;t.range=i?ii[t.brushType](n.values,i.offset,ri(n.xyMinMax,i.xyMinMax)):n.values}}),this)},t.prototype.makePanelOpts=function(t,e){return Object(j["F"])(this._targetInfoList,(function(o){var n=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:e?e(o):null,clipPath:Hn(n),isTargetByCursor:qn(n,t,o.coordSysModel),getLinearBrushOtherExtent:Un(n)}}))},t.prototype.controlSeries=function(t,e,o){var n=this.findTargetInfo(t,o);return!0===n||n&&Object(j["q"])(n.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var o=this._targetInfoList,n=Kn(e,t),i=0;i<o.length;i++){var a=o[i],r=t.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<ti.length;s++)if(ti[s](n,a))return a}return!0},t}();function Jn(t){return t[0]>t[1]&&t.reverse(),t}function Kn(t,e){return Object(re["r"])(t,e,{includeMainTypes:Xn})}var Qn={grid:function(t,e){var o=t.xAxisModels,n=t.yAxisModels,i=t.gridModels,a=Object(j["g"])(),r={},s={};(o||n||i)&&(Object(j["k"])(o,(function(t){var e=t.axis.grid.model;a.set(e.id,e),r[e.id]=!0})),Object(j["k"])(n,(function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0})),Object(j["k"])(i,(function(t){a.set(t.id,t),r[t.id]=!0,s[t.id]=!0})),a.each((function(t){var i=t.coordinateSystem,a=[];Object(j["k"])(i.getCartesians(),(function(t,e){(Object(j["q"])(o,t.getAxis("x").model)>=0||Object(j["q"])(n,t.getAxis("y").model)>=0)&&a.push(t)})),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:a[0],coordSyses:a,getPanelRect:ei.grid,xAxisDeclared:r[t.id],yAxisDeclared:s[t.id]})})))},geo:function(t,e){Object(j["k"])(t.geoModels,(function(t){var o=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:o,coordSyses:[o],getPanelRect:ei.geo})}))}},ti=[function(t,e){var o=t.xAxisModel,n=t.yAxisModel,i=t.gridModel;return!i&&o&&(i=o.axis.grid.model),!i&&n&&(i=n.axis.grid.model),i&&i===e.gridModel},function(t,e){var o=t.geoModel;return o&&o===e.geoModel}],ei={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(lt["getTransform"](t)),e}},oi={lineX:Object(j["i"])(ni,0),lineY:Object(j["i"])(ni,1),rect:function(t,e,o,n){var i=t?e.pointToData([o[0][0],o[1][0]],n):e.dataToPoint([o[0][0],o[1][0]],n),a=t?e.pointToData([o[0][1],o[1][1]],n):e.dataToPoint([o[0][1],o[1][1]],n),r=[Jn([i[0],a[0]]),Jn([i[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(t,e,o,n){var i=[[1/0,-1/0],[1/0,-1/0]],a=Object(j["F"])(o,(function(o){var a=t?e.pointToData(o,n):e.dataToPoint(o,n);return i[0][0]=Math.min(i[0][0],a[0]),i[1][0]=Math.min(i[1][0],a[1]),i[0][1]=Math.max(i[0][1],a[0]),i[1][1]=Math.max(i[1][1],a[1]),a}));return{values:a,xyMinMax:i}}};function ni(t,e,o,n){var i=o.getAxis(["x","y"][t]),a=Jn(Object(j["F"])([0,1],(function(t){return e?i.coordToData(i.toLocalCoord(n[t]),!0):i.toGlobalCoord(i.dataToCoord(n[t]))}))),r=[];return r[t]=a,r[1-t]=[NaN,NaN],{values:a,xyMinMax:r}}var ii={lineX:Object(j["i"])(ai,0),lineY:Object(j["i"])(ai,1),rect:function(t,e,o){return[[t[0][0]-o[0]*e[0][0],t[0][1]-o[0]*e[0][1]],[t[1][0]-o[1]*e[1][0],t[1][1]-o[1]*e[1][1]]]},polygon:function(t,e,o){return Object(j["F"])(t,(function(t,n){return[t[0]-o[0]*e[n][0],t[1]-o[1]*e[n][1]]}))}};function ai(t,e,o,n){return[e[0]-n[t]*o[0],e[1]-n[t]*o[1]]}function ri(t,e){var o=si(t),n=si(e),i=[o[0]/n[0],o[1]/n[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function si(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var li=$n,ci=o("ef6a"),ui=o("2f1f"),di=j["k"],pi=Object(re["o"])("toolbox-dataZoom_"),hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S["a"])(e,t),e.prototype.render=function(t,e,o,n){this._brushController||(this._brushController=new Gn(o.getZr()),this._brushController.on("brush",j["c"](this._onBrush,this)).mount()),yi(t,e,this,n,o),mi(t,e)},e.prototype.onclick=function(t,e,o){fi[o].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var o={},n=this.ecModel;this._brushController.updateCovers([]);var i=new li(gi(this.model),n,{include:["grid"]});i.matchOutputRanges(e,n,(function(t,e,o){if("cartesian2d"===o.type){var n=t.brushType;"rect"===n?(a("x",o,e[0]),a("y",o,e[1])):a({lineX:"x",lineY:"y"}[n],o,e)}})),zo(n,o),this._dispatchZoomAction(o)}function a(t,e,i){var a=e.getAxis(t),s=a.model,l=r(t,s,n),c=l.findRepresentativeAxisProxy(s).getMinMaxSpan();null==c.minValueSpan&&null==c.maxValueSpan||(i=Object(ci["a"])(0,i.slice(),a.scale.getExtent(),0,c.minValueSpan,c.maxValueSpan)),l&&(o[l.id]={dataZoomId:l.id,startValue:i[0],endValue:i[1]})}function r(t,e,o){var n;return o.eachComponent({mainType:"dataZoom",subType:"select"},(function(o){var i=o.getAxisModel(t,e.componentIndex);i&&(n=o)})),n}},e.prototype._dispatchZoomAction=function(t){var e=[];di(t,(function(t,o){e.push(j["d"](t))})),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){var e={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return e},e}($e),fi={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(Ro(this.ecModel))}};function gi(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}function mi(t,e){t.setIconStatus("back",Eo(e)>1?"emphasis":"normal")}function yi(t,e,o,n,i){var a=o._isZoomActive;n&&"takeGlobalCursor"===n.type&&(a="dataZoomSelect"===n.key&&n.dataZoomSelectActive),o._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var r=new li(gi(t),e,{include:["grid"]}),s=r.makePanelOpts(i,(function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"}));o._brushController.setPanels(s).enableBrush(!(!a||!s.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}Object(ui["b"])("dataZoom",(function(t){var e=t.getComponent("toolbox",0),o=["feature","dataZoom"];if(e&&null!=e.get(o)){var n=e.getModel(o),i=[],a=gi(n),r=Object(re["r"])(t,a);return di(r.xAxisModels,(function(t){return s(t,"xAxis","xAxisIndex")})),di(r.yAxisModels,(function(t){return s(t,"yAxis","yAxisIndex")})),i}function s(t,e,o){var a=t.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:pi+e+a};r[o]=a,i.push(r)}}));var bi=hi;function vi(t){t.registerComponentModel(eo),t.registerComponentView(so),Ke("saveAsImage",uo),Ke("magicType",yo),Ke("dataView",Do),Ke("dataZoom",bi),Ke("restore",Go),Object(O["a"])(Xe)}var xi=o("2da7"),_i=o("abd2"),Ci=o("c436");Object(O["a"])([zt["a"],ee,oe["a"],ne["a"],ie["a"],ae["a"],Ve,We["a"],vi,xi["a"],_i["a"],Ci["a"],gt,mt["a"],yt["a"],Lt,w["a"]]);var Oi="5.5%",wi="1%",Si=55,ji=8,ki="#26A69A",Ii="#26A69A",Ai="#EF5350",Mi="#EF5350",Pi="#00ff26",Ti="#00ff26",Di="#faba25",Ni="#faba25",Li="cyan",zi="pink",Ri=function(t){Object(c["a"])(o,t);var e=Object(u["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.buyData=[],t.sellData=[],t.chartOptions={},t}return Object(l["a"])(o,[{key:"datasetChanged",value:function(){this.updateChart()}},{key:"plotConfigChanged",value:function(){this.initializeChartOptions()}},{key:"strategy",get:function(){return this.dataset?this.dataset.strategy:""}},{key:"pair",get:function(){return this.dataset?this.dataset.pair:""}},{key:"timeframe",get:function(){return this.dataset?this.dataset.timeframe:""}},{key:"timeframems",get:function(){return this.dataset?this.dataset.timeframe_ms:0}},{key:"datasetColumns",get:function(){return this.dataset?this.dataset.columns:[]}},{key:"hasData",get:function(){return null!==this.dataset&&"object"===y(this.dataset)}},{key:"filteredTrades",get:function(){var t=this;return this.trades.filter((function(e){return e.pair===t.pair}))}},{key:"mounted",value:function(){this.initializeChartOptions()}},{key:"chartTitle",get:function(){return"".concat(this.strategy," - ").concat(this.pair," - ").concat(this.timeframe)}},{key:"initializeChartOptions",value:function(){this.chartOptions={title:[{show:!1}],backgroundColor:"rgba(0, 0, 0, 0)",useUTC:this.useUTC,animation:!1,legend:{data:["Candles","Volume","Buy","Sell"],right:"1%"},tooltip:{show:!0,trigger:"axis",backgroundColor:"rgba(80,80,80,0.7)",borderWidth:0,textStyle:{color:"#fff"},axisPointer:{type:"cross",lineStyle:{color:"#cccccc",width:1,opacity:1}},position:function(t,e,o,n,i){var a={top:60};return a[["left","right"][+(t[0]<i.viewSize[0]/2)]]=5,a}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},xAxis:[{type:"time",scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!0},axisLabel:{show:!0},axisPointer:{label:{show:!1}},position:"top",splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},{type:"time",gridIndex:1,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0},{scale:!0,gridIndex:1,splitNumber:2,name:"volume",nameLocation:"middle",nameGap:Si,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:80,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:80,end:100}]},console.log("Initialized"),this.updateChart(!0)}},{key:"updateChart",value:function(){var t,e,o,n,i,r,s=this,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.hasData){null!==(t=this.chartOptions)&&void 0!==t&&t.title&&(this.chartOptions.title[0].text=this.chartTitle);var c=this.dataset.columns.findIndex((function(t){return"__date_ts"===t})),u=this.dataset.columns.findIndex((function(t){return"open"===t})),d=this.dataset.columns.findIndex((function(t){return"high"===t})),p=this.dataset.columns.findIndex((function(t){return"low"===t})),h=this.dataset.columns.findIndex((function(t){return"close"===t})),f=this.dataset.columns.findIndex((function(t){return"volume"===t})),g=this.dataset.columns.findIndex((function(t){return"_buy_signal_open"===t||"_buy_signal_close"===t||"_enter_long_signal_close"===t})),m=this.dataset.columns.findIndex((function(t){return"_sell_signal_open"===t||"_sell_signal_close"===t||"_exit_long_signal_close"===t})),y=this.dataset.enter_short_signals&&this.dataset.enter_short_signals>0&&this.dataset.exit_short_signals&&this.dataset.exit_short_signals>0,v=this.dataset.columns.findIndex((function(t){return"_enter_short_signal_close"===t})),x=this.dataset.columns.findIndex((function(t){return"_exit_short_signal_close"===t}));console.log("short_exit",x);var _="subplots"in this.plotConfig?Object.keys(this.plotConfig.subplots).length+1:1;if(null!==(e=this.chartOptions)&&void 0!==e&&e.dataZoom&&Array.isArray(null===(o=this.chartOptions)||void 0===o?void 0:o.dataZoom))if(l){var C=100*(1-250/this.dataset.length);this.chartOptions.dataZoom.forEach((function(t,e){s.chartOptions&&s.chartOptions.dataZoom&&(s.chartOptions.dataZoom[e].start=C)}))}else this.chartOptions.dataZoom.forEach((function(t,e){s.chartOptions&&s.chartOptions.dataZoom&&(delete s.chartOptions.dataZoom[e].start,delete s.chartOptions.dataZoom[e].end)}));var O,w={dataset:{source:this.dataset.data},grid:[{left:Oi,right:wi,bottom:"".concat(_*ji+2,"%")},{left:Oi,right:wi,bottom:"".concat(_*ji,"%"),height:"".concat(ji,"%")}],series:[{name:"Candles",type:"candlestick",barWidth:"80%",itemStyle:{color:ki,color0:Ai,borderColor:Ii,borderColor0:Mi},encode:{x:c,y:[u,h,p,d]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#777777"},large:!0,encode:{x:c,y:f}},{name:"Buy",type:"scatter",symbol:"triangle",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Pi},encode:{x:c,y:g}},{name:"Sell",type:"scatter",symbol:"diamond",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Di},encode:{x:c,y:m}}]};if(y)!Array.isArray(this.chartOptions.legend)&&null!==(O=this.chartOptions.legend)&&void 0!==O&&O.data&&(this.chartOptions.legend.data.push("Short"),this.chartOptions.legend.data.push("Short exit")),Array.isArray(w.series)&&(w.series.push({name:"Short",type:"scatter",symbol:"pin",symbolSize:10,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Ti},encode:{x:c,y:v}}),w.series.push({name:"Short exit",type:"scatter",symbol:"pin",symbolSize:8,xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Ni},encode:{x:c,y:x}}));if(Object.assign(this.chartOptions,w),"main_plot"in this.plotConfig&&Object.entries(this.plotConfig.main_plot).forEach((function(t){var e=Object(a["a"])(t,2),o=e[0],n=e[1],i=s.dataset.columns.findIndex((function(t){return t===o}));if(i>1){var r;!Array.isArray(s.chartOptions.legend)&&null!==(r=s.chartOptions.legend)&&void 0!==r&&r.data&&s.chartOptions.legend.data.push(o);var l={name:o,type:n.type||"line",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:n.color},encode:{x:c,y:i},showSymbol:!1};Array.isArray(s.chartOptions.series)&&s.chartOptions.series.push(l)}else console.log("element ".concat(o," for main plot not found in columns."))})),"subplots"in this.plotConfig){var S=2;Object.entries(this.plotConfig.subplots).forEach((function(t){var e=Object(a["a"])(t,2),o=e[0],n=e[1],i=S;Array.isArray(s.chartOptions.yAxis)&&s.chartOptions.yAxis.length<=S&&s.chartOptions.yAxis.push({scale:!0,gridIndex:i,name:o,nameLocation:"middle",nameGap:Si,axisLabel:{show:!0},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}),Array.isArray(s.chartOptions.xAxis)&&s.chartOptions.xAxis.length<=S&&s.chartOptions.xAxis.push({type:"time",scale:!0,gridIndex:i,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},axisLabel:{show:!1},axisPointer:{label:{show:!1}},splitLine:{show:!1},splitNumber:20}),Array.isArray(s.chartOptions.dataZoom)&&s.chartOptions.dataZoom.forEach((function(t){return t.xAxisIndex&&Array.isArray(t.xAxisIndex)?t.xAxisIndex.push(S):null})),s.chartOptions.grid&&Array.isArray(s.chartOptions.grid)&&s.chartOptions.grid.push({left:Oi,right:wi,bottom:"".concat((_-S+1)*ji,"%"),height:"".concat(ji,"%")}),Object.entries(n).forEach((function(t){var e=Object(a["a"])(t,2),o=e[0],n=e[1],i=s.dataset.columns.findIndex((function(t){return t===o}));if(i>0){var r;!Array.isArray(s.chartOptions.legend)&&null!==(r=s.chartOptions.legend)&&void 0!==r&&r.data&&s.chartOptions.legend.data.push(o);var l={name:o,type:n.type||"line",xAxisIndex:S,yAxisIndex:S,itemStyle:{color:n.color||b()},encode:{x:c,y:i},showSymbol:!1};s.chartOptions.series&&Array.isArray(s.chartOptions.series)&&s.chartOptions.series.push(l)}else console.log("element ".concat(o," was not found in the columns."))})),S+=1}))}this.chartOptions.grid&&Array.isArray(this.chartOptions.grid)&&(this.chartOptions.grid[this.chartOptions.grid.length-1].bottom="50px",delete this.chartOptions.grid[this.chartOptions.grid.length-1].top);var j=this.getTradeEntries(),k=j.trades,I=j.tradesClose,A="Trades",M="Trades Close";!Array.isArray(this.chartOptions.legend)&&null!==(n=this.chartOptions.legend)&&void 0!==n&&n.data&&this.chartOptions.legend.data.push(A);var P={name:A,type:"scatter",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:Li},data:k};Array.isArray(null===(i=this.chartOptions)||void 0===i?void 0:i.series)&&this.chartOptions.series.push(P),!Array.isArray(this.chartOptions.legend)&&null!==(r=this.chartOptions.legend)&&void 0!==r&&r.data&&this.chartOptions.legend.data.push(M);var T={name:M,type:"scatter",xAxisIndex:0,yAxisIndex:0,itemStyle:{color:zi},data:I};this.chartOptions.series&&Array.isArray(this.chartOptions.series)&&this.chartOptions.series.push(T),console.log("chartOptions",this.chartOptions),this.$refs.candleChart.setOption(this.chartOptions)}}},{key:"getTradeEntries",value:function(){for(var t=[],e=[],o=0,n=this.filteredTrades.length;o<n;o+=1){var i=this.filteredTrades[o];i.open_timestamp>=this.dataset.data_start_ts&&i.open_timestamp<=this.dataset.data_stop_ts&&t.push([_(this.timeframems,i.open_timestamp),i.open_rate]),void 0!==i.close_timestamp&&i.close_timestamp<this.dataset.data_stop_ts&&i.close_timestamp>this.dataset.data_start_ts&&void 0!==i.close_date&&void 0!==i.close_rate&&e.push([_(this.timeframems,i.close_timestamp),i.close_rate])}return{trades:t,tradesClose:e}}},{key:"useUTCChanged",value:function(){this.initializeChartOptions()}}]),o}(p["d"]);Object(d["a"])([Object(p["c"])({required:!1,default:[]})],Ri.prototype,"trades",void 0),Object(d["a"])([Object(p["c"])({required:!0})],Ri.prototype,"dataset",void 0),Object(d["a"])([Object(p["c"])({default:!0})],Ri.prototype,"useUTC",void 0),Object(d["a"])([Object(p["c"])({required:!0})],Ri.prototype,"plotConfig",void 0),Object(d["a"])([Object(p["c"])({default:"dark"})],Ri.prototype,"theme",void 0),Object(d["a"])([Object(p["e"])("dataset")],Ri.prototype,"datasetChanged",null),Object(d["a"])([Object(p["e"])("plotConfig")],Ri.prototype,"plotConfigChanged",null),Object(d["a"])([Object(p["e"])("useUTC")],Ri.prototype,"useUTCChanged",null),Ri=Object(d["a"])([Object(p["a"])({components:{"v-chart":C["a"]}})],Ri);var Bi=Ri,Ei=Bi,Vi=(o("33aa"),o("2877")),Wi=Object(Vi["a"])(Ei,g,m,!1,null,"21f6421f",null),Gi=Wi.exports,Fi=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.columns?o("div",[o("b-form-group",{attrs:{label:"Plot config name","label-for":"idPlotConfigName"}},[o("b-form-input",{attrs:{id:"idPlotConfigName",size:"sm"},model:{value:t.plotConfigNameLoc,callback:function(e){t.plotConfigNameLoc=e},expression:"plotConfigNameLoc"}})],1),o("div",{staticClass:"col-mb-3"},[o("hr"),o("b-form-group",{attrs:{label:"Target","label-for":"FieldSel"}},[o("b-form-select",{attrs:{id:"FieldSel",options:t.subplots,"select-size":3},model:{value:t.selSubPlot,callback:function(e){t.selSubPlot=e},expression:"selSubPlot"}})],1)],1),o("b-form-group",{attrs:{label:"Add new plot","label-for":"newSubPlot"}},[o("b-input-group",{attrs:{size:"sm"}},[o("b-form-input",{staticClass:"addPlot",attrs:{id:"newSubPlot"},model:{value:t.newSubplotName,callback:function(e){t.newSubplotName=e},expression:"newSubplotName"}}),o("b-input-group-append",[o("b-button",{attrs:{disabled:!t.newSubplotName},on:{click:t.addSubplot}},[t._v("+")]),t.selSubPlot&&"main_plot"!=t.selSubPlot?o("b-button",{on:{click:t.delSubplot}},[t._v("-")]):t._e()],1)],1)],1),o("hr"),o("div",[o("b-form-group",{attrs:{label:"Used indicators","label-for":"selectedIndicators"}},[o("b-form-select",{attrs:{id:"selectedIndicators",options:t.usedColumns,"select-size":4},model:{value:t.selIndicatorName,callback:function(e){t.selIndicatorName=e},expression:"selIndicatorName"}})],1)],1),o("div",[o("b-button",{attrs:{variant:"primary",title:"Add indicator to plot",size:"sm",disabled:t.addNewIndicator},on:{click:function(e){t.addNewIndicator=!t.addNewIndicator}}},[t._v(" Add new indicator ")]),o("b-button",{staticClass:"ml-1",attrs:{variant:"primary",title:"Remove indicator to plot",size:"sm",disabled:!t.selIndicatorName},on:{click:t.removeIndicator}},[t._v(" Remove indicator ")])],1),t.selIndicatorName||t.addNewIndicator?o("PlotIndicator",{staticClass:"mt-1",attrs:{columns:t.columns,"add-new":t.addNewIndicator},model:{value:t.selIndicator,callback:function(e){t.selIndicator=e},expression:"selIndicator"}}):t._e(),o("hr"),o("div",[o("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm"},on:{click:t.loadPlotConfig}},[t._v("Load")]),o("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm"},on:{click:t.loadPlotConfigFromStrategy}},[t._v(" From strategy ")]),o("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm","data-toggle":"tooltip",title:"Save configuration"},on:{click:t.savePlotConfig}},[t._v("Save")]),o("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm",title:"Load configuration from text box below"},on:{click:t.resetConfig}},[t._v("Reset")]),o("b-button",{staticClass:"ml-1",attrs:{id:"showButton",variant:"primary",size:"sm",title:"Show configuration for easy transfer to a strategy"},on:{click:function(e){t.showConfig=!t.showConfig}}},[t._v("Show")]),t.showConfig?o("b-button",{staticClass:"ml-1",attrs:{variant:"primary",size:"sm",title:"Load configuration from text box below"},on:{click:t.loadConfigFromString}},[t._v("Load from String")]):t._e()],1),t.showConfig?o("div",{staticClass:"col-mb-5 ml-1 mt-2"},[o("b-textarea",{staticClass:"textArea",attrs:{id:"TextArea",size:"sm",state:t.tempPlotConfigValid},model:{value:t.plotConfigJson,callback:function(e){t.plotConfigJson=e},expression:"plotConfigJson"}})],1):t._e()],1):t._e()},Zi=[],Hi=o("1da1"),Ui=o("2909"),qi=o("ade3"),Yi=(o("96cf"),o("bf67")),Xi=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.addNew?o("div",[o("b-form-group",{attrs:{label:"Add indicator","label-for":"indicatorSelector"}},[o("b-form-select",{attrs:{id:"indicatorSelector",options:t.columns,"select-size":4},model:{value:t.selAvailableIndicator,callback:function(e){t.selAvailableIndicator=e},expression:"selAvailableIndicator"}})],1)],1):t._e(),o("b-form-group",{attrs:{label:"Type","label-for":"plotTypeSelector"}},[o("b-form-select",{attrs:{id:"plotTypeSelector",size:"sm",options:t.availableGraphTypes},on:{change:function(e){return t.emitIndicator()}},model:{value:t.graphType,callback:function(e){t.graphType=e},expression:"graphType"}})],1),o("hr"),o("b-form-group",{attrs:{label:"Color","label-for":"colsel",size:"sm"}},[o("b-input-group",[o("b-input-group-prepend",[o("div",{staticClass:"colorbox mr-2",style:{"background-color":t.selColor}})]),o("b-form-input",{attrs:{id:"colsel",size:"sm"},model:{value:t.selColor,callback:function(e){t.selColor=e},expression:"selColor"}}),o("b-input-group-append",[o("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.newColor}},[t._v("↻")])],1)],1)],1),o("div",{staticClass:"d-flex d-flex-columns d-flex"},[t.addNew?o("b-button",{staticClass:"flex-grow-1",attrs:{variant:"primary",title:"Add ",size:"sm"},on:{click:t.emitIndicator}},[t._v(" Save indicator ")]):t._e(),t.addNew?o("b-button",{staticClass:"ml-1 flex-grow-1",attrs:{variant:"primary",title:"Add ",size:"sm"},on:{click:t.clickCancel}},[t._v(" Cancel ")]):t._e()],1)],1)},$i=[],Ji=function(t){Object(c["a"])(o,t);var e=Object(u["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.selColor=b(),t.graphType=f["b"].line,t.availableGraphTypes=Object.keys(f["b"]),t.selAvailableIndicator="",t.cancelled=!1,t}return Object(l["a"])(o,[{key:"emitIndicator",value:function(){return this.combinedIndicator}},{key:"watchValue",value:function(){var t=Object.keys(this.value),e=Object(a["a"])(t,1);this.selAvailableIndicator=e[0],this.cancelled=!1,this.selAvailableIndicator&&this.value&&(this.selColor=this.value[this.selAvailableIndicator].color||b(),this.graphType=this.value[this.selAvailableIndicator].type||f["b"].line)}},{key:"watchColor",value:function(){this.addNew||this.emitIndicator()}},{key:"clickCancel",value:function(){this.cancelled=!0,this.emitIndicator()}},{key:"combinedIndicator",get:function(){return this.cancelled||!this.selAvailableIndicator?{}:Object(qi["a"])({},this.selAvailableIndicator,{color:this.selColor,type:this.graphType})}},{key:"newColor",value:function(){this.selColor=b()}}]),o}(p["d"]);Object(d["a"])([Object(p["c"])({required:!0})],Ji.prototype,"value",void 0),Object(d["a"])([Object(p["c"])({required:!0})],Ji.prototype,"columns",void 0),Object(d["a"])([Object(p["c"])({required:!0})],Ji.prototype,"addNew",void 0),Object(d["a"])([Object(p["b"])("input")],Ji.prototype,"emitIndicator",null),Object(d["a"])([Object(p["e"])("value")],Ji.prototype,"watchValue",null),Object(d["a"])([Object(p["e"])("selColor")],Ji.prototype,"watchColor",null),Ji=Object(d["a"])([Object(p["a"])({})],Ji);var Ki,Qi,ta,ea=Ji,oa=ea,na=(o("9731"),Object(Vi["a"])(oa,Xi,$i,!1,null,"2dfb5bfd",null)),ia=na.exports,aa=o("c865"),ra=o("fec2"),sa=Object(h["c"])("ftbot"),la=Object(h["c"])("alerts"),ca=function(t){Object(c["a"])(o,t);var e=Object(u["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.plotConfig=f["c"],t.plotOptions=[{text:"Main Plot",value:"main_plot"},{text:"Subplots",value:"subplots"}],t.plotConfigNameLoc="default",t.newSubplotName="",t.selAvailableIndicator="",t.selIndicatorName="",t.addNewIndicator=!1,t.showConfig=!1,t.selSubPlot="main_plot",t.tempPlotConfig=void 0,t.tempPlotConfigValid=!0,t}return Object(l["a"])(o,[{key:"emitPlotConfig",value:function(){return this.plotConfig}},{key:"selIndicator",get:function(){return this.addNewIndicator?{}:this.selIndicatorName?Object(qi["a"])({},this.selIndicatorName,this.currentPlotConfig[this.selIndicatorName]):{}},set:function(t){var e=Object.keys(t)[0];e&&t?this.addIndicator(t):this.addNewIndicator=!1}},{key:"plotConfigJson",get:function(){return JSON.stringify(this.plotConfig,null,2)},set:function(t){try{this.tempPlotConfig=JSON.parse(t),this.tempPlotConfigValid=!0}catch(e){this.tempPlotConfigValid=!1}}},{key:"subplots",get:function(){return["main_plot"].concat(Object(Ui["a"])(Object.keys(this.plotConfig.subplots)))}},{key:"usedColumns",get:function(){return this.isMainPlot?Object.keys(this.plotConfig.main_plot):this.selSubPlot in this.plotConfig.subplots?Object.keys(this.plotConfig.subplots[this.selSubPlot]):[]}},{key:"isMainPlot",get:function(){return"main_plot"===this.selSubPlot}},{key:"currentPlotConfig",get:function(){return this.isMainPlot?this.plotConfig.main_plot:this.plotConfig.subplots[this.selSubPlot]}},{key:"mounted",value:function(){console.log("Config Mounted",this.value),this.plotConfig=this.value,this.plotConfigNameLoc=this.plotConfigName}},{key:"watchValue",value:function(){this.plotConfig=this.value,this.plotConfigNameLoc=this.plotConfigName}},{key:"addIndicator",value:function(t){console.log(this.plotConfig);var e=this.plotConfig,o=Object.keys(t)[0],n=t[o];this.isMainPlot?(console.log("Adding ".concat(o," to MainPlot")),e.main_plot[o]=Object(r["a"])({},n)):(console.log("Adding ".concat(o," to ").concat(this.selSubPlot)),e.subplots[this.selSubPlot][o]=Object(r["a"])({},n)),this.plotConfig=Object(r["a"])({},e),this.addNewIndicator=!1,this.emitPlotConfig()}},{key:"removeIndicator",value:function(){console.log(this.plotConfig);var t=this.plotConfig;this.isMainPlot?(console.log("Removing ".concat(this.selIndicatorName," from MainPlot")),delete t.main_plot[this.selIndicatorName]):(console.log("Removing ".concat(this.selIndicatorName," from ").concat(this.selSubPlot)),delete t.subplots[this.selSubPlot][this.selIndicatorName]),this.plotConfig=Object(r["a"])({},t),console.log(this.plotConfig),this.selIndicatorName="",this.emitPlotConfig()}},{key:"addSubplot",value:function(){this.plotConfig.subplots=Object(r["a"])(Object(r["a"])({},this.plotConfig.subplots),{},Object(qi["a"])({},this.newSubplotName,{})),this.selSubPlot=this.newSubplotName,this.newSubplotName="",console.log(this.plotConfig),this.emitPlotConfig()}},{key:"delSubplot",value:function(){delete this.plotConfig.subplots[this.selSubPlot],this.plotConfig.subplots=Object(r["a"])({},this.plotConfig.subplots),this.selSubPlot=""}},{key:"savePlotConfig",value:function(){this.saveCustomPlotConfig(Object(qi["a"])({},this.plotConfigNameLoc,this.plotConfig))}},{key:"loadPlotConfig",value:function(){this.plotConfig=Object(Yi["b"])(this.plotConfigNameLoc),console.log(this.plotConfig),console.log("loading config"),this.emitPlotConfig()}},{key:"loadConfigFromString",value:function(){void 0!==this.tempPlotConfig&&this.tempPlotConfigValid&&(this.plotConfig=this.tempPlotConfig,this.emitPlotConfig())}},{key:"resetConfig",value:function(){this.plotConfig=Object(r["a"])({},f["c"])}},{key:"loadPlotConfigFromStrategy",value:function(){var t=Object(Hi["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getStrategyPlotConfig();case 3:this.plotConfig=this.strategyPlotConfig,this.emitPlotConfig(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.addAlert({message:"Failed to load Plot configuration from Strategy."});case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}()}]),o}(p["d"]);Ki=aa["b"].strategyPlotConfig,Qi=aa["b"].plotConfigName,ta=ra["a"].addAlert,Object(d["a"])([Object(p["c"])({required:!0})],ca.prototype,"value",void 0),Object(d["a"])([Object(p["c"])({required:!0})],ca.prototype,"columns",void 0),Object(d["a"])([Object(p["c"])({required:!1,default:!0})],ca.prototype,"asModal",void 0),Object(d["a"])([Object(p["b"])("input")],ca.prototype,"emitPlotConfig",null),Object(d["a"])([sa.Action],ca.prototype,"getStrategyPlotConfig",void 0),Object(d["a"])([sa.Getter],ca.prototype,Ki,void 0),Object(d["a"])([sa.Action],ca.prototype,"saveCustomPlotConfig",void 0),Object(d["a"])([sa.Action],ca.prototype,"updatePlotConfigName",void 0),Object(d["a"])([sa.Getter],ca.prototype,Qi,void 0),Object(d["a"])([la.Action],ca.prototype,ta,void 0),Object(d["a"])([Object(p["e"])("value")],ca.prototype,"watchValue",null),ca=Object(d["a"])([Object(p["a"])({components:{PlotIndicator:ia}})],ca);var ua,da,pa,ha,fa,ga=ca,ma=ga,ya=(o("dadb"),Object(Vi["a"])(ma,Fi,Zi,!1,null,"34ebf3b4",null)),ba=ya.exports,va=o("7383"),xa=Object(h["c"])("ftbot"),_a=Object(h["c"])("uiSettings"),Ca=function(t){Object(c["a"])(o,t);var e=Object(u["a"])(o);function o(){var t;return Object(s["a"])(this,o),t=e.apply(this,arguments),t.pair="",t.plotConfig=Object(r["a"])({},f["c"]),t.plotConfigName="",t.showPlotConfig=t.plotConfigModal,t}return Object(l["a"])(o,[{key:"dataset",get:function(){return this.historicView?this.history["".concat(this.pair,"__").concat(this.timeframe)]:this.candleData["".concat(this.pair,"__").concat(this.timeframe)]}},{key:"strategyName",get:function(){var t;return this.strategy||(null===(t=this.dataset)||void 0===t?void 0:t.strategy)||""}},{key:"datasetColumns",get:function(){return this.dataset?this.dataset.columns:[]}},{key:"hasDataset",get:function(){return!!this.dataset}},{key:"mounted",value:function(){if(this.selectedPair)this.pair=this.selectedPair;else if(this.availablePairs.length>0){var t=Object(a["a"])(this.availablePairs,1);this.pair=t[0]}this.plotConfigName=Object(Yi["c"])(),this.plotConfig=Object(Yi["b"])(this.plotConfigName)}},{key:"plotConfigChanged",value:function(){console.log("plotConfigChanged"),this.plotConfig=Object(Yi["b"])(this.plotConfigName),this.setPlotConfigName(this.plotConfigName)}},{key:"showConfigurator",value:function(){this.plotConfigModal?this.$bvModal.show("plotConfiguratorModal"):this.showPlotConfig=!this.showPlotConfig}},{key:"refresh",value:function(){this.pair&&this.timeframe&&(this.historicView?this.getPairHistory({pair:this.pair,timeframe:this.timeframe,timerange:this.timerange,strategy:this.strategy}):this.getPairCandles({pair:this.pair,timeframe:this.timeframe,limit:500}))}},{key:"watchAvailablePairs",value:function(){var t=this;if(!this.availablePairs.find((function(e){return e===t.pair}))){var e=Object(a["a"])(this.availablePairs,1);this.pair=e[0],this.refresh()}}},{key:"watchSelectedPair",value:function(){this.pair=this.selectedPair,this.refresh()}}]),o}(p["d"]);ua=aa["b"].availablePlotConfigNames,da=aa["b"].candleData,pa=aa["b"].history,ha=aa["b"].selectedPair,fa=va["c"].timezone,Object(d["a"])([Object(p["c"])({required:!0})],Ca.prototype,"availablePairs",void 0),Object(d["a"])([Object(p["c"])({required:!0})],Ca.prototype,"timeframe",void 0),Object(d["a"])([Object(p["c"])({required:!1,default:function(){return[]}})],Ca.prototype,"trades",void 0),Object(d["a"])([Object(p["c"])({required:!1,default:!1})],Ca.prototype,"historicView",void 0),Object(d["a"])([Object(p["c"])({required:!1,default:!0})],Ca.prototype,"plotConfigModal",void 0),Object(d["a"])([Object(p["c"])({required:!1,default:!1})],Ca.prototype,"timerange",void 0),Object(d["a"])([Object(p["c"])({required:!1,default:!1})],Ca.prototype,"strategy",void 0),Object(d["a"])([h["b"]],Ca.prototype,"getChartTheme",void 0),Object(d["a"])([xa.Getter],Ca.prototype,ua,void 0),Object(d["a"])([xa.Action],Ca.prototype,"setPlotConfigName",void 0),Object(d["a"])([xa.Getter],Ca.prototype,da,void 0),Object(d["a"])([xa.Getter],Ca.prototype,pa,void 0),Object(d["a"])([xa.Getter],Ca.prototype,ha,void 0),Object(d["a"])([xa.Action],Ca.prototype,"getPairCandles",void 0),Object(d["a"])([xa.Action],Ca.prototype,"getPairHistory",void 0),Object(d["a"])([_a.Getter],Ca.prototype,fa,void 0),Object(d["a"])([Object(p["e"])("availablePairs")],Ca.prototype,"watchAvailablePairs",null),Object(d["a"])([Object(p["e"])(aa["b"].selectedPair)],Ca.prototype,"watchSelectedPair",null),Ca=Object(d["a"])([Object(p["a"])({components:{CandleChart:Gi,PlotConfigurator:ba}})],Ca);var Oa=Ca,wa=Oa,Sa=(o("5e91"),Object(Vi["a"])(wa,n,i,!1,null,"3eaa31d8",null));e["a"]=Sa.exports},dadb:function(t,e,o){"use strict";o("c97d")}}]);
//# sourceMappingURL=backtest~graph~trade.5982a07e.js.map