{"version":3,"sources":["webpack:///./src/components/charts/CandleChart.vue?a1fa","webpack:///./src/components/charts/CandleChartContainer.vue?3a5b","webpack:///./src/components/charts/PlotIndicator.vue?5bfd","webpack:///./src/components/charts/CandleChartContainer.vue?86ea","webpack:///./src/components/charts/CandleChart.vue?411d","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./src/shared/randomColor.ts","webpack:///./src/shared/timemath.ts","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickView.js","webpack:///./node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","webpack:///./node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","webpack:///./node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","webpack:///./node_modules/echarts/lib/chart/candlestick/preprocessor.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","webpack:///./node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","webpack:///./node_modules/echarts/lib/chart/candlestick/install.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterSeries.js","webpack:///./node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","webpack:///./node_modules/echarts/lib/chart/scatter/ScatterView.js","webpack:///./node_modules/echarts/lib/chart/scatter/install.js","webpack:///./node_modules/echarts/lib/coord/calendar/CalendarModel.js","webpack:///./node_modules/echarts/lib/component/calendar/CalendarView.js","webpack:///./node_modules/echarts/lib/coord/calendar/Calendar.js","webpack:///./node_modules/echarts/lib/component/calendar/install.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineModel.js","webpack:///./node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineView.js","webpack:///./node_modules/echarts/lib/component/timeline/TimelineAxis.js","webpack:///./node_modules/echarts/lib/component/timeline/SliderTimelineView.js","webpack:///./node_modules/echarts/lib/component/timeline/timelineAction.js","webpack:///./node_modules/echarts/lib/component/timeline/preprocessor.js","webpack:///./node_modules/echarts/lib/component/timeline/install.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","webpack:///./node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","webpack:///./node_modules/echarts/lib/component/toolbox/featureManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxModel.js","webpack:///./node_modules/echarts/lib/component/toolbox/ToolboxView.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/MagicType.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataView.js","webpack:///./node_modules/echarts/lib/component/dataZoom/history.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/Restore.js","webpack:///./node_modules/echarts/lib/component/helper/BrushController.js","webpack:///./node_modules/echarts/lib/component/helper/cursorHelper.js","webpack:///./node_modules/echarts/lib/component/helper/brushHelper.js","webpack:///./node_modules/echarts/lib/component/helper/BrushTargetManager.js","webpack:///./node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","webpack:///./node_modules/echarts/lib/component/toolbox/install.js","webpack:///./src/components/charts/CandleChart.vue","webpack:///./src/components/charts/CandleChart.vue?a324","webpack:///./src/components/charts/CandleChart.vue?382b","webpack:///./src/components/charts/PlotConfigurator.vue?421f","webpack:///./src/components/charts/PlotIndicator.vue?a362","webpack:///./src/components/charts/PlotIndicator.vue","webpack:///./src/components/charts/PlotIndicator.vue?8d9e","webpack:///./src/components/charts/PlotIndicator.vue?97c0","webpack:///./src/components/charts/PlotConfigurator.vue","webpack:///./src/components/charts/PlotConfigurator.vue?630d","webpack:///./src/components/charts/PlotConfigurator.vue?e718","webpack:///./src/components/charts/CandleChartContainer.vue","webpack:///./src/components/charts/CandleChartContainer.vue?26f9","webpack:///./src/components/charts/CandleChartContainer.vue?617d","webpack:///./src/components/charts/PlotConfigurator.vue?5bf5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","datasetColumns","model","value","callback","$$v","plotConfig","expression","_e","_v","_s","strategyName","timeframe","staticStyle","availablePairs","on","refresh","pair","dataset","buy_signals","sell_signals","enter_short_signals","exit_short_signals","availablePlotConfigNames","plotConfigChanged","plotConfigName","showConfigurator","trades","timezone","getChartTheme","plotConfigModal","directives","name","rawName","staticRenderFns","ref","theme","_typeof","obj","Symbol","iterator","constructor","prototype","Math","random","toString","ROUND_UP","ROUND_DOWN","roundTimeframe","timeframems","timestamp","direction","offset","SKIP_PROPS","_super","CandlestickView","_this","apply","arguments","type","seriesModel","ecModel","api","group","removeClipPath","_updateDrawMode","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","incrementalRender","params","_incrementalRenderLarge","_incrementalRenderNormal","isLargeDraw","pipelineContext","large","data","getData","oldData","_data","isSimpleBox","getLayout","needsClip","get","coord","coordinateSystem","clipArea","getArea","removeAll","diff","add","newIdx","hasValue","itemLayout","getItemLayout","isNormalBoxClipped","el","createNormalBox","shape","points","ends","setBoxCommon","setItemGraphicEl","update","oldIdx","getItemGraphicEl","remove","execute","createLarge","clipPath","setClipPath","dataIndex","next","incremental","Chart","NormalBoxPathShape","NormalBoxPath","opts","call","getDefaultShape","buildPath","ctx","__simpleBox","moveTo","lineTo","closePath","Path","isInit","transInit","z2","clipped","i","length","contain","itemModel","getItemModel","useStyle","getItemVisual","style","strokeNoScale","point","slice","initBaseline","LargeBoxPathShape","LargeBoxPath","__sign","x","largePoints","elP","elN","setLargeStyle","sign","borderColor","itemStyle","getModel","getItemStyle","fill","stroke","createSeriesDataSimply","opt","nameList","coordDimensions","encodeDefine","getEncode","source","getSource","dimensions","list","SeriesData","initData","WhiskerBoxCommonMixin","getInitialData","option","ordinalMeta","addOrdinal","xAxisModel","getComponent","yAxisModel","xAxisType","yAxisType","layout","getOrdinalMeta","coordDims","baseAxisDimIndex","baseAxisDim","_baseAxisDim","otherAxisDim","axisModels","baseAxisType","otherAxisType","newOptionData_1","item","index","newItem","unshift","push","defaultValueDimensions","otherDims","tooltip","itemName","dimsDef","dimensionsCount","encodeDefaulter","getBaseAxis","dim","axis","CandlestickSeriesModel","defaultTooltip","getShadowDim","brushSelector","selectors","rect","brushRect","dependencies","defaultOption","zlevel","z","legendHoverLink","clip","color","color0","borderColor0","borderWidth","emphasis","scale","barMaxWidth","barMinWidth","barWidth","largeThreshold","progressive","progressiveThreshold","progressiveChunkMode","animationEasing","animationDuration","Series","CandlestickSeries","candlestickPreprocessor","series","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","positiveColorQuery","negativeColorQuery","candlestickVisual","seriesType","plan","createRenderPlanner","performRawSeries","reset","getColor","getBorderColor","isSeriesFiltered","isLargeRender","progress","existsStyle","ensureUniqueItemVisual","LargeArr","Float32Array","Array","candlestickLayout","coordSys","candleWidth","calculateCandleWidth","cDimIdx","vDimIdx","cDimI","getDimensionIndex","mapDimension","vDimsI","mapDimensionsAll","openDimI","closeDimI","lowestDimI","highestDimI","setLayout","largeProgress","normalProgress","store","getStore","axisDimVal","openVal","closeVal","lowestVal","highestVal","ocLow","min","ocHigh","max","ocLowPoint","getPoint","ocHighPoint","lowestPoint","highestPoint","addBodyEnd","subPixelOptimizePoint","setItemLayout","getSign","makeBrushRect","val","p","isNaN","NaN","dataToPoint","start","point1","point2","pmin","pmax","y","width","height","count","tmpIn","tmpOut","extent","baseAxis","bandWidth","getBandWidth","getExtent","abs","install","registers","registerChartView","registerSeriesModel","registerPreprocessor","registerVisual","registerLayout","ScatterSeriesModel","hasSymbolVisual","createSeriesData","useEncodeDefaulter","getProgressive","getProgressiveThreshold","symbolSize","opacity","select","universalTransition","divideShape","ScatterSeries","BOOST_SIZE_THRESHOLD","LargeSymbolPathShape","LargeSymbolPath","path","size","symbolProxy","symbolProxyShape","getContext","canBoost","_ctx","softClipShape","afterBrush","fillRect","findDataIndex","w","h","idx","x0","y0","LargeSymbolDraw","isPersistent","_incremental","updateData","symbolEl","rectHover","cursor","setShape","_setCommon","updateLayout","eachChild","child","startIndex","len","endIndex","byteOffset","buffer","incrementalPrepareUpdate","_clearIncremental","IncrementalDisplayable","silent","incrementalUpdate","taskParams","addDisplayable","end","isIncremental","hostModel","getVisual","clipShape","setColor","extrudeShadow","globalStyle","visualColor","ecData_1","seriesIndex","e","offsetX","offsetY","clearDisplaybles","ScatterView","symbolDraw","_updateSymbolDraw","_getClipShape","_finished","_symbolDraw","updateTransform","dirty","res","SymbolDraw","dispose","CalendarModel","init","parentModel","inputPositionParams","mergeAndNormalizeLayoutParams","mergeOption","getCellSize","cellSize","left","top","orient","splitLine","show","lineStyle","dayLabel","firstDay","position","margin","monthLabel","align","formatter","yearLabel","fontFamily","fontWeight","fontSize","Component","target","raw","cellSizeArr","ignoreSize","hvIdx","CalendarView","calendarModel","rangeData","getRangeInfo","getOrient","localeModel","getLocaleModel","_renderDayRect","_renderLines","_renderYearText","_renderMonthText","_renderWeekText","itemRectStyleModel","sw","getCellWidth","sh","getCellHeight","time","getNextNDay","dataToRect","tl","self","lineStyleModel","getLineStyle","lineWidth","_tlpoints","_blpoints","_firstDayOfMonth","_firstDayPoints","addPoints","formatedDate","getDateInfo","m","date","setMonth","getMonth","_getLinePointsOfOneWeek","_drawSplitline","_getEdgesPoints","rs","poyline","parsedDate","tmpD","day","_formatterLabel","format","nameMap","_yearTextPositionControl","textEl","aligns","rotate","PI","rotation","verticalAlign","pos","xc","yc","posPoints","bottom","right","content","yearText","text","attr","_monthTextPositionControl","isCenter","vAlign","termPoints","tmp","firstDayPoints","name_1","yyyy","yy","MM","M","monthText","_weekTextPositionControl","isStart","firstDayOfWeek","getFirstDayOfWeek","dayOfWeekShort","lweek","fweek","center","weekText","PROXIMATE_ONE_DAY","Calendar","getDimensionsInfo","_model","_rangeInfo","getRect","_rect","_sw","_sh","_orient","_firstDayOfWeek","number","getFullYear","mStr","d","getDate","dStr","getDay","getTime","n","Date","setDate","_lineWidth","_getRangeInfo","_initRangeOption","weeks","whNames","layoutParams","getBoxLayoutParams","cellNumbers","cellSizeSpecified","whGlobal","getWidth","getHeight","calendarRect","clamp","dayInfo","range","week","nthWeek","pointToData","pointToDate","contentShape","tr","br","bl","nthX","floor","nthY","_getDateByWeeksAndDay","convertToPixel","finder","getCoordSys","convertFromPixel","pixel","containPoint","console","warn","normalizedRange","rangeStr","test","reverse","reversed","parsedRange","allDay","startDateNum","endDateNum","dateNum","rangeInfo","nthDay","create","calendarList","eachComponent","calendar","eachSeries","calendarSeries","registerComponentModel","registerComponentView","registerCoordinateSystem","TimelineModel","layoutMode","mergeDefaultAndTheme","_initData","setCurrentIndex","currentIndex","loop","getCurrentIndex","isIndexMax","setPlayState","state","autoPlay","getPlayState","processedDataArr","thisOption","dataArr","axisType","names","_names","dimType","category","getCategories","realtime","padding","controlPosition","rewind","playInterval","label","SliderTimelineModel","backgroundColor","inverse","trigger","symbol","interval","checkpointStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","animation","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","itemSize","itemGap","playIcon","stopIcon","nextIcon","prevIcon","prevBtnSize","nextBtnSize","TimelineView","TimelineAxis","coordExtent","getLabelModel","isHorizontal","Axis","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","_layout","mainGroup_1","_createGroup","labelGroup","axis_1","_axis","_createAxis","formatTooltip","getLabel","noName","_renderAxisLabel","_position","_doPlayStop","_updateTicksStatus","_clearTimer","parsedLabelPos","labelPosOpt","viewRect","getViewRect","horizontal","vertical","playPosition","prevBtnPosition","nextBtnPosition","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","labelRotation","xLeft","xRight","axisExtent","labelAlign","labelBaseline","layoutInfo","mainGroup","_mainGroup","_labelGroup","matrix","rotateOriginX","rotateOriginY","clone","applyTransform","viewBound","getBound","mainBound","getBoundingRect","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","originX","originY","fromPos","from","to","dimIdx","boundIdx","setPosition","createScaleByModel","getTicks","mapArray","dataExtent","getDataExtent","setExtent","niceTicks","key","newGroup","_renderAxisLine","line","x1","y1","x2","y2","lineCap","progressLine","_progressLine","_currentPointer","_renderAxisTick","ticks","_tickSymbols","tick","tickCoord","dataToCoord","itemStyleModel","hoverStyleModel","progressStyleModel","symbolOpt","onclick","_changeTimeline","giveSymbol","ensureState","ecData","dataModel","labelModel","labels","getViewLabels","_tickLabels","labelItem","tickValue","normalLabelModel","hoverLabelModel","progressLabelModel","formattedLabel","_renderControl","hoverStyle","playState","makeBtn","iconName","willRotate","iconSize","btn","makeControlIcon","_handlePlayClick","_renderCurrentPointer","pointerModel","me","onCreate","pointer","draggable","drift","_handlePointerDrag","ondragend","_handlePointerDragend","pointerMoveTo","onUpdate","nextState","dispatchAction","uid","dx","dy","_pointerChangeTimeline","mousePos","toCoord","_toAxisCoord","markRedraw","targetDataIndex","_findNearestTick","_timer","setTimeout","vertex","trans","getLocalTransform","graphic","axisCoord","dist","Infinity","each","clearTimeout","nextIndex","tickSymbols","tickLabels","toggleState","Ordinal","Time","locale","useUTC","Interval","objPath","icon","BoundingRect","setStyle","symbolType","scaleX","scaleY","symbolOffset","symbolRotate","noAnimation","dragging","animationCfg","duration","easing","stopAnimation","animateTo","installTimelineAction","registerAction","event","payload","resetOption","replaceMerge","timelinePreprocessor","timelineOpt","timeline","compatibleEC2","ec2Types","transferItem","has","dataItem","itemStyleEmphasis","labelNormal","normal","excludeLabelAttr","hasOwnProperty","registerSubTypeDefaulter","SelectDataZoomModel","DataZoomModel","SelectDataZoomView","DataZoomView","SelectZoomModel","SelectZoomView","installCommon","ToolboxFeature","registerFeature","ctor","getFeature","ToolboxModel","optionUpdated","feature","featureOpt","featureName","Feature","getDefaultOption","borderRadius","showTitle","iconStyle","ToolboxView","toolboxModel","featureOpts","features","_features","featureNames","DataDiffer","_featureNames","processFeature","listComponent","titleText","__title","emphasisState","emphasisTextConfig","textConfig","textContent","getTextContent","emphasisTextState","states","emphasisTextStyle","makeFont","needPutOnTop","topOffset","newIndex","oldIndex","oldName","featureModel","Model","newTitle","title","isUserFeatureName","isToolboxFeature","unusable","createIconPaths","setIconStatus","status","iconPaths","iconStatus","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconStr","pathEmphasisState","ignore","setTextContent","componentModel","formatterParamsExtra","defaultTextPosition","setTextConfig","hide","updateView","indexOf","SaveAsImage","isSvg","getZr","painter","getType","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","MouseEvent","env","browser","newEdge","ie","edge","window","navigator","msSaveOrOpenBlob","parts","split","base64Encoded","bstr","decodeURIComponent","atob","filename","u8arr","Uint8Array","charCodeAt","blob","Blob","frame","document","createElement","body","appendChild","cw","contentWindow","doc","open","write","close","focus","execCommand","removeChild","lang","html","tab","$a","download","href","evt","view","defaultView","bubbles","cancelable","dispatchEvent","canvasSupported","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","bar","stack","seriesOptGenreator","newOption","generateNewSeriesTypes","subType","seriesId","id","newSeriesOpt","categoryAxis","getAxesByScale","axisDim","axisModel","getReferringComponents","models","axisIndex","componentIndex","boundaryGap","radio","mainType","query","currentType","tiled","markPoint","markLine","isStack","echarts","BLOCK_SPLITER","join","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","eachRawSeries","valueAxis","getOtherAxis","other","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","concat","columns","rawData","getRawData","lines","items","j","assembleOtherSeries","vals","argLen","getName","getContentFromModel","result","str","replace","trim","isTSVFormat","block","firstLine","itemSplitRegex","RegExp","parseTSVContents","tsv","tsvLines","shift","categories","header","parseListContents","seriesName","hasName","parseContents","blockMetaList","blocks","blockMeta","axisKey","DataView","container","getDom","_dom","root","cssText","innerHTML","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","Error","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","originalData","newVal","original","newValIsObject","shouldDeleteName","newSeriesOptList","seriesOpt","getSeriesByName","inner","newSnapshot","storedSnapshots","getStoreSnapshots","batchItem","dataZoomId","snapshot","dataZoomModel","queryComponents","percentRange","getPercentRange","pop","head","clear","snapshots","RestoreOption","Restore","BRUSH_PANEL_GLOBAL","mathMin","mathMax","mathPow","pow","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","s","CURSOR_MAP","ne","nw","se","DEFAULT_BRUSH_OPT","brushStyle","transformable","brushMode","removeOnClick","baseUID","BrushController","zr","_track","_covers","_handlers","_zr","_uid","pointerHandlers","handler","eventName","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","interactionMutex","_brushOption","off","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","thisGroup","_transform","updateCovers","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","controller","creatingCover","_creatingCover","oldGetKey","getKey","addOrUpdate","cover","__brushOption","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","Eventful","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","traverse","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","transform","pn","isTargetByCursor","getPanelByCover","covers","originalLength","areas","isEnd","shouldShowCover","track","p2","p1","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","invisible","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","childAt","childOfName","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","getTransform","localDirName","map","inverseMap","dir","localDirNameSeq","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","transformCoordToLocal","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","_dragging","setCursorStyle","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","determineBrushType","coverBrushOption","getCreatingRange","defaultBrushType","mousedown","handleDragEnd","mousemove","mouseup","lineX","getLineRenderer","lineY","returnInput","localTrack","polygon","xyIndex","otherExtent","getLinearBrushOtherExtent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","boundingRect","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","area","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","values","xyMinMax","cb","targetInfo","findTargetInfo","coordSyses","setInputRanges","rangeOffset","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","coordSysModel","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","minMax","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","set","cartesians","getCartesians","cartesian","getAxis","panelRectBuilders","xAxisDeclared","yAxisDeclared","geo","geoModels","geoModel","master","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","coordToData","toLocalCoord","toGlobalCoord","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","_brushController","_onBrush","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","_dispatchZoomAction","dimName","findDataZoom","minMaxSpan","findRepresentativeAxisProxy","getMinMaxSpan","minValueSpan","maxValueSpan","sliderMove","startValue","endValue","found","dzModel","getAxisModel","batch","filterMode","zoom","back","nextActive","_isZoomActive","dataZoomSelectActive","dzFeatureModel","setting","xAxisIndex","yAxisIndex","xAxisId","yAxisId","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisMainType","axisIndexPropName","newOpt","$fromToolbox","DataZoom","MARGINLEFT","MARGINRIGHT","NAMEGAP","SUBPLOTHEIGHT","upColor","upBorderColor","downColor","downBorderColor","buySignalColor","shortEntrySignalColor","sellSignalColor","shortexitSignalColor","tradeBuyColor","tradeSellColor","buyData","sellData","chartOptions","updateChart","initializeChartOptions","strategy","timeframe_ms","filter","legend","textStyle","axisPointer","dom","viewSize","link","xAxis","axisLine","onZero","axisTick","axisLabel","splitNumber","gridIndex","yAxis","nameLocation","nameGap","dataZoom","log","initial","hasData","chartTitle","colDate","findIndex","colOpen","colHigh","colLow","colClose","colVolume","colBuyData","colSellData","hasShorts","colShortEntryData","colShortExitData","subplotCount","Object","keys","subplots","isArray","startingZoom","forEach","options","encode","assign","entries","main_plot","col","showSymbol","plotIndex","currGridIdx","sk","sv","randomColor","getTradeEntries","tradesClose","nameClose","sp","closeSeries","$refs","candleChart","setOption","filteredTrades","trade","open_timestamp","data_start_ts","data_stop_ts","open_rate","undefined","close_timestamp","close_date","close_rate","required","default","components","plotConfigNameLoc","selSubPlot","newSubplotName","addSubplot","delSubplot","usedColumns","selIndicatorName","addNewIndicator","$event","removeIndicator","selIndicator","loadPlotConfig","loadPlotConfigFromStrategy","savePlotConfig","resetConfig","showConfig","loadConfigFromString","tempPlotConfigValid","plotConfigJson","selAvailableIndicator","availableGraphTypes","emitIndicator","graphType","selColor","newColor","clickCancel","cancelled","combinedIndicator","addNew","plotOptions","tempPlotConfig","currentPlotConfig","newValue","addIndicator","JSON","stringify","parse","err","isMainPlot","newIndicator","indicator","emitPlotConfig","saveCustomPlotConfig","getStrategyPlotConfig","strategyPlotConfig","addAlert","message","Action","Getter","PlotIndicator","uiSettingsNs","showPlotConfig","historicView","history","candleData","selectedPair","setPlotConfigName","$bvModal","getPairHistory","timerange","getPairCandles","limit","find","CandleChart","PlotConfigurator"],"mappings":"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","file":"js/backtest~graph~trade.5982a07e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=style&index=0&id=21f6421f&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=style&index=0&id=3eaa31d8&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotIndicator.vue?vue&type=style&index=0&id=2dfb5bfd&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex h-100\"},[_c('div',{staticClass:\"flex-fill container-fluid flex-column align-items-stretch d-flex h-100\"},[(_vm.plotConfigModal)?_c('b-modal',{attrs:{\"id\":\"plotConfiguratorModal\",\"title\":\"Plot Configurator\",\"ok-only\":\"\",\"hide-backdrop\":\"\",\"button-size\":\"sm\"}},[_c('PlotConfigurator',{attrs:{\"columns\":_vm.datasetColumns},model:{value:(_vm.plotConfig),callback:function ($$v) {_vm.plotConfig=$$v},expression:\"plotConfig\"}})],1):_vm._e(),_c('div',{staticClass:\"row mr-0\"},[_c('div',{staticClass:\"ml-2 d-flex flex-wrap flex-md-nowrap align-items-center\"},[_c('span',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(_vm._s(_vm.strategyName)+\" | \"+_vm._s(_vm.timeframe || ''))]),_c('b-select',{staticClass:\"ml-2\",staticStyle:{\"min-width\":\"7em\"},attrs:{\"options\":_vm.availablePairs,\"size\":\"sm\"},on:{\"change\":_vm.refresh},model:{value:(_vm.pair),callback:function ($$v) {_vm.pair=$$v},expression:\"pair\"}}),_c('b-button',{staticClass:\"ml-2\",attrs:{\"disabled\":!!!_vm.pair,\"size\":\"sm\"},on:{\"click\":_vm.refresh}},[_vm._v(\"↻\")]),(_vm.dataset)?_c('small',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(\"Buysignals: \"+_vm._s(_vm.dataset.buy_signals))]):_vm._e(),(_vm.dataset)?_c('small',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(\"SellSignals: \"+_vm._s(_vm.dataset.sell_signals))]):_vm._e(),(_vm.dataset && _vm.dataset.enter_short_signals)?_c('small',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(\"Short entries: \"+_vm._s(_vm.dataset.enter_short_signals))]):_vm._e(),(_vm.dataset && _vm.dataset.exit_short_signals)?_c('small',{staticClass:\"ml-2 text-nowrap\"},[_vm._v(\"Short exits: \"+_vm._s(_vm.dataset.exit_short_signals))]):_vm._e()],1),_c('div',{staticClass:\"ml-auto mr-2\"},[_c('b-select',{attrs:{\"options\":_vm.availablePlotConfigNames,\"size\":\"sm\"},on:{\"change\":_vm.plotConfigChanged},model:{value:(_vm.plotConfigName),callback:function ($$v) {_vm.plotConfigName=$$v},expression:\"plotConfigName\"}})],1),_c('div',{staticClass:\"mr-0 mr-md-1\"},[_c('b-button',{attrs:{\"size\":\"sm\",\"title\":\"Plot configurator\"},on:{\"click\":_vm.showConfigurator}},[_vm._v(\"⚙\")])],1)]),_c('div',{staticClass:\"row mr-1 ml-1 h-100\"},[(_vm.hasDataset)?_c('CandleChart',{attrs:{\"dataset\":_vm.dataset,\"trades\":_vm.trades,\"plot-config\":_vm.plotConfig,\"use-u-t-c\":_vm.timezone === 'UTC',\"theme\":_vm.getChartTheme}}):_c('label',{staticStyle:{\"margin\":\"auto auto\",\"font-size\":\"1.5rem\"}},[_vm._v(\"No data available\")])],1)],1),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"in-out\"}},[(!_vm.plotConfigModal)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPlotConfig),expression:\"showPlotConfig\"}],staticClass:\"w-25 config-sidebar\"},[_c('PlotConfigurator',{attrs:{\"columns\":_vm.datasetColumns,\"as-modal\":false},model:{value:(_vm.plotConfig),callback:function ($$v) {_vm.plotConfig=$$v},expression:\"plotConfig\"}})],1):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row flex-grow-1 chart-wrapper\"},[(_vm.hasData)?_c('v-chart',{ref:\"candleChart\",attrs:{\"theme\":_vm.theme,\"autoresize\":\"\",\"manual-update\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function () {\n  // eslint-disable-next-line no-bitwise\n  return `#${((Math.random() * 0xffffff) << 0).toString(16)}`;\n}\n","const ROUND_UP = 2;\nconst ROUND_DOWN = 3;\n\nexport function roundTimeframe(\n  timeframems: number,\n  timestamp: number,\n  direction: number = ROUND_DOWN,\n) {\n  const offset = timestamp % timeframems;\n  return timestamp - offset + (direction === ROUND_UP ? timeframems : 0);\n}\n\nexport default {\n  ROUND_UP,\n  ROUND_DOWN,\n  roundTimeframe,\n};\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1\n  });\n  group.add(elN);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']); // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport SeriesData from '../../data/SeriesData';\nimport { extend, isArray } from 'zrender/lib/core/util';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice(); // Modify current using data.\n\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice(); // Modify current using data.\n\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { extend } from 'zrender/lib/core/util';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function (params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { subPixelOptimize } from '../../util/graphic';\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { parsePercent } from '../../util/number';\nimport { map, retrieve2 } from 'zrender/lib/core/util';\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = new LargeArr(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = dataIndex > 0 // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView';\nimport CandlestickSeriesModel from './CandlestickSeries';\nimport preprocessor from './preprocessor';\nimport candlestickVisual from './candlestickVisual';\nimport candlestickLayout from './candlestickLayout';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData';\nimport SeriesModel from '../../model/Series';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // 图形旋转控制\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: 各异\n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\n\nimport * as graphic from '../../util/graphic';\nimport { createSymbol } from '../../util/symbol';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable';\nimport { getECData } from '../../util/innerStore';\nvar BOOST_SIZE_THRESHOLD = 4;\n\nvar LargeSymbolPathShape =\n/** @class */\nfunction () {\n  function LargeSymbolPathShape() {}\n\n  return LargeSymbolPathShape;\n}();\n\nvar LargeSymbolPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeSymbolPath, _super);\n\n  function LargeSymbolPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD; // Do draw in afterBrush.\n\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n\n    this._ctx = null;\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n  };\n\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n\n    if (!ctx) {\n      return;\n    } // PENDING If style or other canvas status changed?\n\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n  };\n\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  };\n\n  return LargeSymbolPath;\n}(graphic.Path);\n\nvar LargeSymbolDraw =\n/** @class */\nfunction () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n\n  LargeSymbolDraw.prototype.isPersistent = function () {\n    return !this._incremental;\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this.group.removeAll();\n    var symbolEl = new LargeSymbolPath({\n      rectHover: true,\n      cursor: 'default'\n    });\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, false, opt);\n\n    this.group.add(symbolEl);\n    this._incremental = null;\n  };\n\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    if (this._incremental) {\n      return;\n    }\n\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n\n      child.setShape('points', points);\n    });\n  };\n\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clearIncremental(); // Only use incremental displayables when data amount is larger than 2 million.\n    // PENDING Incremental data?\n\n\n    if (data.count() > 2e6) {\n      if (!this._incremental) {\n        this._incremental = new IncrementalDisplayable({\n          silent: true\n        });\n      }\n\n      this.group.add(this._incremental);\n    } else {\n      this._incremental = null;\n    }\n  };\n\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var symbolEl;\n\n    if (this._incremental) {\n      symbolEl = new LargeSymbolPath();\n\n      this._incremental.addDisplayable(symbolEl, true);\n    } else {\n      symbolEl = new LargeSymbolPath({\n        rectHover: true,\n        cursor: 'default',\n        startIndex: taskParams.start,\n        endIndex: taskParams.end\n      });\n      symbolEl.incremental = true;\n      this.group.add(symbolEl);\n    }\n\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, !!this._incremental, opt);\n  };\n\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, isIncremental, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n\n    if (!isIncremental) {\n      var ecData_1 = getECData(symbolEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData_1.seriesIndex = hostModel.seriesIndex;\n      symbolEl.on('mousemove', function (e) {\n        ecData_1.dataIndex = null;\n        var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n        if (dataIndex >= 0) {\n          // Provide dataIndex for tooltip\n          ecData_1.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n        }\n      });\n    }\n  };\n\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clearIncremental();\n\n    this._incremental = null;\n    this.group.removeAll();\n  };\n\n  LargeSymbolDraw.prototype._clearIncremental = function () {\n    var incremental = this._incremental;\n\n    if (incremental) {\n      incremental.clearDisplaybles();\n    }\n  };\n\n  return LargeSymbolDraw;\n}();\n\nexport default LargeSymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw';\nimport pointsLayout from '../../layout/points';\nimport ChartView from '../../view/Chart';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport ScatterSeriesModel from './ScatterSeries';\nimport ScatterView from './ScatterView';\nimport { install as installGridSimple } from '../../component/grid/installSimple';\nimport layoutPoints from '../../layout/points';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout';\n\nvar CalendarModel =\n/** @class */\nfunction (_super) {\n  __extends(CalendarModel, _super);\n\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\n\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nexport default CalendarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isString, extend, map } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { formatTplSimple } from '../../util/format';\nimport { parsePercent } from '../../util/number';\nimport ComponentView from '../../view/Component';\nimport { getLocaleModel } from '../../core/locale';\n\nvar CalendarView =\n/** @class */\nfunction (_super) {\n  __extends(CalendarView, _super);\n\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarView.type;\n    return _this;\n  }\n\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem; // range info\n\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient(); // locale\n\n    var localeModel = ecModel.getLocaleModel();\n\n    this._renderDayRect(calendarModel, rangeData, group); // _renderLines must be called prior to following function\n\n\n    this._renderLines(calendarModel, rangeData, orient, group);\n\n    this._renderYearText(calendarModel, rangeData, orient, group);\n\n    this._renderMonthText(calendarModel, localeModel, orient, group);\n\n    this._renderWeekText(calendarModel, localeModel, rangeData, orient, group);\n  }; // render day rect\n\n\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl; // every rect\n\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  }; // render separate line\n\n\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n\n      self._tlpoints.push(points[0]);\n\n      self._blpoints.push(points[points.length - 1]);\n\n      show && self._drawSplitline(points, lineStyleModel, group);\n    } // render top/left line\n\n\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group); // render bottom/right line\n\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  }; // get points at both ends\n\n\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1; // both ends of the line are extend half lineWidth\n\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  }; // render split line\n\n\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  }; // render month line of one week points\n\n\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n\n    return points;\n  };\n\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (typeof formatter === 'string' && formatter) {\n      return formatTplSimple(formatter, params);\n    }\n\n    if (typeof formatter === 'function') {\n      return formatter(params);\n    }\n\n    return params.nameMap;\n  };\n\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n\n    var rotate = 0;\n\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  }; // render year\n\n\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n\n    if (!yearLabel.get('show')) {\n      return;\n    }\n\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n\n    var content = this._formatterLabel(formatter, params);\n\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      })\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n\n    if (orient === 'horizontal') {\n      y = y + margin;\n\n      if (isCenter) {\n        align = 'center';\n      }\n\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render month and year text\n\n\n  CalendarView.prototype._renderMonthText = function (calendarModel, localeModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n\n    if (!monthLabel.get('show')) {\n      return;\n    }\n\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      } // PENDING\n      // for ZH locale, original form is `一月` but current form is `1月`\n\n\n      nameMap = localeModel.get(['time', 'monthAbbr']) || [];\n    }\n\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n\n      var content = this._formatterLabel(formatter, params);\n\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin))\n      });\n      group.add(monthText);\n    }\n  };\n\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render weeks\n\n\n  CalendarView.prototype._renderWeekText = function (calendarModel, localeModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n\n    if (!dayLabel.get('show')) {\n      return;\n    }\n\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      } // Use the first letter of `dayOfWeekAbbr` if `dayOfWeekShort` doesn't exist in the locale file\n\n\n      var dayOfWeekShort = localeModel.get(['time', 'dayOfWeekShort']);\n      nameMap = dayOfWeekShort || map(localeModel.get(['time', 'dayOfWeekAbbr']), function (val) {\n        return val[0];\n      });\n    }\n\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize))\n      });\n      group.add(weekText);\n    }\n  };\n\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\n\nexport default CalendarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as layout from '../../util/layout';\nimport * as numberUtil from '../../util/number'; // (24*60*60*1000)\n\nvar PROXIMATE_ONE_DAY = 86400000;\n\nvar Calendar =\n/** @class */\nfunction () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions; // Required in createListFromData\n\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n\n\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n\n\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.getCellSize().slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    } // Has been calculated out number.\n\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n\n\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n\n\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n\n\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n\n\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n\n\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n\n    var normalizedRange; // Convert [1990] to 1990\n\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString(); // One year.\n\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      } // One month\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      } // One day\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      } // Not handling it.\n\n\n      return range;\n    }\n\n    var tmp = this._getRangeInfo(normalizedRange);\n\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n\n\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n\n\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\n\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\n\nexport default Calendar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel';\nimport CalendarView from './CalendarView';\nimport Calendar from '../../coord/calendar/Calendar';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\nimport SeriesData from '../../data/SeriesData';\nimport { each, isObject, clone } from 'zrender/lib/core/util';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model';\n\nvar TimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(TimelineModel, _super);\n\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._initData();\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this._initData();\n  };\n\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n\n    var count = this._data.count();\n\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n\n\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n\n\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n\n\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n\n\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n\n  TimelineModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\n\nexport default TimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport { mixin } from 'zrender/lib/core/util';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderTimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineModel, _super);\n\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\n\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar TimelineView =\n/** @class */\nfunction (_super) {\n  __extends(TimelineView, _super);\n\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineView.type;\n    return _this;\n  }\n\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\n\nexport default TimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis';\n/**\n * Extend axis 2d\n */\n\nvar TimelineAxis =\n/** @class */\nfunction (_super) {\n  __extends(TimelineAxis, _super);\n\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n\n  return TimelineAxis;\n}(Axis);\n\nexport default TimelineAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport * as layout from '../../util/layout';\nimport TimelineView from './TimelineView';\nimport TimelineAxis from './TimelineAxis';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol';\nimport * as numberUtil from '../../util/number';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util';\nimport OrdinalScale from '../../scale/Ordinal';\nimport TimeScale from '../../scale/Time';\nimport IntervalScale from '../../scale/Interval';\nimport { parsePercent } from 'zrender/lib/contain/text';\nimport { makeInner } from '../../util/model';\nimport { getECData } from '../../util/innerStore';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\n\nvar SliderTimelineView =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineView, _super);\n\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n\n      var mainGroup_1 = this._createGroup('_mainGroup');\n\n      var labelGroup = this._createGroup('_labelGroup');\n\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n\n      this._position(layoutInfo_1, timelineModel);\n    }\n\n    this._doPlayStop();\n\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos; // Auto label offset.\n\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    }; // Position\n\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap; // Special label rotate.\n\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength; // position[0] means left, position[1] means middle.\n\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n\n    var axisExtent = [xLeft, xRight];\n\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType); // Customize scale. The `tickValue` is `dataIndex`.\n\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.niceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var data = timelineModel.getData(); // Show all ticks, despite ignoring strategy.\n\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = []; // The value is dataIndex, see the costomized scale.\n\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n\n      _this._tickSymbols.push(el);\n    });\n  };\n\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var labelModel = axis.getLabelModel();\n\n    if (!labelModel.get('show')) {\n      return;\n    }\n\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the costomized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n\n      _this._tickLabels.push(textEl);\n    });\n  };\n\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function (pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function (pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    }; // Reuse when exists, for animation and drag.\n\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n\n    this._currentPointer.markRedraw();\n\n    this._progressLine.shape.x2 = toCoord;\n\n    this._progressLine.dirty();\n\n    var targetDataIndex = this._findNearestTick(toCoord);\n\n    var timelineModel = this.model;\n\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n\n    this._clearTimer();\n\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n\n    return graphic.applyTransform(vertex, trans, true);\n  };\n\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\n\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\n\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3])); // TODO createIcon won't use style in opt.\n\n  if (style) {\n    icon.setStyle(style);\n  }\n\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\n\n\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n\n    callback && callback.onUpdate(symbol);\n  } // Style\n\n\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle); // Transform and events.\n\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt); // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n\n  symbol.updateTransform();\n  return symbol;\n}\n\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\n\nexport default SliderTimelineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false); // The timeline has played to the end, trigger event\n\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    } // Set normalized currentIndex to payload.\n\n\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n\n    compatibleEC2(opt);\n  });\n}\n\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  }; // Compatible with ec2\n\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n\n  transferItem(opt);\n\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n\n    delete opt.controlPosition;\n  }\n\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n\n      transferItem(dataItem);\n    }\n  });\n}\n\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {}); // Transfer label out\n\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\n\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport SliderTimelineModel from './SliderTimelineModel';\nimport SliderTimelineView from './SliderTimelineView';\nimport { installTimelineAction } from './timelineAction';\nimport preprocessor from './preprocessor';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel';\nimport SelectZoomView from './SelectZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as featureManager from './featureManager';\nimport ComponentModel from '../../model/Component';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        }); // graphic.enableHoverEmphasis(path);\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env';\nimport { ToolboxFeature } from '../featureManager';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    }); // Chrome, Firefox, New Edge\n\n    if (typeof MouseEvent === 'function' && (env.browser.newEdge || !env.browser.ie && !env.browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework， window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n        if (window.navigator.msSaveOrOpenBlob || isSvg) {\n          var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n          var base64Encoded = parts[0].indexOf('base64') > -1;\n          var bstr = isSvg // should decode the svg data uri first\n          ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n          // otherwise, like `svg` data uri exported by zrender,\n          // there will be an error, for it's not encoded with base64.\n          // (just a url-encoded string through `encodeURIComponent`)\n\n          base64Encoded && (bstr = window.atob(bstr));\n          var filename = title + '.' + type;\n\n          if (window.navigator.msSaveOrOpenBlob) {\n            var n = bstr.length;\n            var u8arr = new Uint8Array(n);\n\n            while (n--) {\n              u8arr[n] = bstr.charCodeAt(n);\n            }\n\n            var blob = new Blob([u8arr]);\n            window.navigator.msSaveOrOpenBlob(blob, filename);\n          } else {\n            var frame = document.createElement('iframe');\n            document.body.appendChild(frame);\n            var cw = frame.contentWindow;\n            var doc = cw.document;\n            doc.open('image/svg+xml', 'replace');\n            doc.write(bstr);\n            doc.close();\n            cw.focus();\n            doc.execCommand('SaveAs', true, filename);\n            document.body.removeChild(frame);\n          }\n        } else {\n          var lang = model.get('lang');\n          var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n          var tab = window.open();\n          tab.document.write(html);\n          tab.document.title = title;\n        }\n      }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { SINGLE_REFERRING } from '../../../util/model';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { addEventListener } from 'zrender/lib/core/event';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (typeof optionToContent === 'function') {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (typeof htmlOrDom === 'string') {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (typeof contentToOption === 'function') {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as history from '../../dataZoom/history';\nimport { ToolboxFeature } from '../featureManager';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util';\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as graphic from '../../util/graphic';\nimport * as interactionMutex from './interactionMutex';\nimport DataDiffer from '../../data/DataDiffer';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { onIrrelevantElement } from './cursorHelper';\nimport * as graphicUtil from '../../util/graphic';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as brushHelper from './brushHelper';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../../helper/BrushController';\nimport BrushTargetManager from '../../helper/BrushTargetManager';\nimport * as history from '../../dataZoom/history';\nimport sliderMove from '../../helper/sliderMove';\nimport { ToolboxFeature } from '../featureManager';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect';\nimport ToolboxModel from './ToolboxModel';\nimport ToolboxView from './ToolboxView'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager';\nimport SaveAsImage from './feature/SaveAsImage';\nimport MagicType from './feature/MagicType';\nimport DataView from './feature/DataView';\nimport Restore from './feature/Restore';\nimport DataZoom from './feature/DataZoom';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Trade, PairHistory, PlotConfig } from '@/types';\nimport randomColor from '@/shared/randomColor';\nimport { roundTimeframe } from '@/shared/timemath';\nimport ECharts from 'vue-echarts';\n\nimport { use } from 'echarts/core';\nimport { EChartsOption, SeriesOption, ScatterSeriesOption } from 'echarts';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport { CandlestickChart, LineChart, BarChart, ScatterChart } from 'echarts/charts';\nimport {\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  ToolboxComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n} from 'echarts/components';\n\nuse([\n  AxisPointerComponent,\n  CalendarComponent,\n  DatasetComponent,\n  DataZoomComponent,\n  GridComponent,\n  LegendComponent,\n  TimelineComponent,\n  TitleComponent,\n  ToolboxComponent,\n  TooltipComponent,\n  VisualMapComponent,\n  VisualMapPiecewiseComponent,\n\n  CandlestickChart,\n  BarChart,\n  LineChart,\n  ScatterChart,\n  CanvasRenderer,\n]);\n\n// Chart default options\nconst MARGINLEFT = '5.5%';\nconst MARGINRIGHT = '1%';\nconst NAMEGAP = 55;\nconst SUBPLOTHEIGHT = 8; // Value in %\n\n// Binance colors\nconst upColor = '#26A69A';\nconst upBorderColor = '#26A69A';\nconst downColor = '#EF5350';\nconst downBorderColor = '#EF5350';\n\nconst buySignalColor = '#00ff26';\nconst shortEntrySignalColor = '#00ff26';\nconst sellSignalColor = '#faba25';\nconst shortexitSignalColor = '#faba25';\nconst tradeBuyColor = 'cyan';\nconst tradeSellColor = 'pink';\n\n@Component({\n  components: { 'v-chart': ECharts },\n})\nexport default class CandleChart extends Vue {\n  $refs!: {\n    candleChart: typeof ECharts;\n  };\n\n  @Prop({ required: false, default: [] }) readonly trades!: Array<Trade>;\n\n  @Prop({ required: true }) readonly dataset!: PairHistory;\n\n  @Prop({ default: true }) readonly useUTC!: boolean;\n\n  @Prop({ required: true }) plotConfig!: PlotConfig;\n\n  @Prop({ default: 'dark' }) theme!: string;\n\n  buyData = [] as Array<number>[];\n\n  sellData = [] as Array<number>[];\n\n  chartOptions: EChartsOption = {};\n\n  @Watch('dataset')\n  datasetChanged() {\n    this.updateChart();\n  }\n\n  @Watch('plotConfig')\n  plotConfigChanged() {\n    this.initializeChartOptions();\n  }\n\n  get strategy() {\n    return this.dataset ? this.dataset.strategy : '';\n  }\n\n  get pair() {\n    return this.dataset ? this.dataset.pair : '';\n  }\n\n  get timeframe() {\n    return this.dataset ? this.dataset.timeframe : '';\n  }\n\n  get timeframems() {\n    return this.dataset ? this.dataset.timeframe_ms : 0;\n  }\n\n  get datasetColumns() {\n    return this.dataset ? this.dataset.columns : [];\n  }\n\n  get hasData() {\n    return this.dataset !== null && typeof this.dataset === 'object';\n  }\n\n  get filteredTrades() {\n    return this.trades.filter((item: Trade) => item.pair === this.pair);\n  }\n\n  mounted() {\n    this.initializeChartOptions();\n  }\n\n  get chartTitle() {\n    return `${this.strategy} - ${this.pair} - ${this.timeframe}`;\n  }\n\n  initializeChartOptions() {\n    this.chartOptions = {\n      title: [\n        {\n          // text: this.chartTitle,\n          show: false,\n        },\n      ],\n      backgroundColor: 'rgba(0, 0, 0, 0)',\n      useUTC: this.useUTC,\n      animation: false,\n      legend: {\n        // Initial legend, further entries are pushed to the below list\n        data: ['Candles', 'Volume', 'Buy', 'Sell'],\n        right: '1%',\n      },\n      tooltip: {\n        show: true,\n        trigger: 'axis',\n        backgroundColor: 'rgba(80,80,80,0.7)',\n        borderWidth: 0,\n        textStyle: {\n          color: '#fff',\n        },\n        axisPointer: {\n          type: 'cross',\n          lineStyle: {\n            color: '#cccccc',\n            width: 1,\n            opacity: 1,\n          },\n        },\n        // positioning copied from https://echarts.apache.org/en/option.html#tooltip.position\n        position(pos, params, dom, rect, size) {\n          // tooltip will be fixed on the right if mouse hovering on the left,\n          // and on the left if hovering on the right.\n          const obj = { top: 60 };\n          obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 5;\n          return obj;\n        },\n      },\n      axisPointer: {\n        link: [{ xAxisIndex: 'all' }],\n        label: {\n          backgroundColor: '#777',\n        },\n      },\n      xAxis: [\n        {\n          type: 'time',\n          scale: true,\n          boundaryGap: false,\n          axisLine: { onZero: false },\n          axisTick: { show: true },\n          axisLabel: { show: true },\n          axisPointer: {\n            label: { show: false },\n          },\n          position: 'top',\n          splitLine: { show: false },\n          splitNumber: 20,\n          min: 'dataMin',\n          max: 'dataMax',\n        },\n        {\n          type: 'time',\n          gridIndex: 1,\n          scale: true,\n          boundaryGap: false,\n          axisLine: { onZero: false },\n          axisTick: { show: false },\n          axisLabel: { show: false },\n          axisPointer: {\n            label: { show: false },\n          },\n          splitLine: { show: false },\n          splitNumber: 20,\n          min: 'dataMin',\n          max: 'dataMax',\n        },\n      ],\n      yAxis: [\n        {\n          scale: true,\n        },\n        {\n          scale: true,\n          gridIndex: 1,\n          splitNumber: 2,\n          name: 'volume',\n          nameLocation: 'middle',\n          // position: 'right',\n          nameGap: NAMEGAP,\n          axisLabel: { show: false },\n          axisLine: { show: false },\n          axisTick: { show: false },\n          splitLine: { show: false },\n        },\n      ],\n      dataZoom: [\n        // Start values are recalculated once the data is known\n        {\n          type: 'inside',\n          xAxisIndex: [0, 1],\n          start: 80,\n          end: 100,\n        },\n        {\n          show: true,\n          xAxisIndex: [0, 1],\n          type: 'slider',\n          bottom: 10,\n          start: 80,\n          end: 100,\n        },\n      ],\n      // visualMap: {\n      //   //  TODO: this would allow to colorize volume bars (if we'd want this)\n      //   //  Needs green / red indicator column in data.\n      //   show: true,\n      //   seriesIndex: 1,\n      //   dimension: 5,\n      //   pieces: [\n      //     {\n      //       max: 500000.0,\n      //       color: downColor,\n      //     },\n      //     {\n      //       min: 500000.0,\n      //       color: upColor,\n      //     },\n      //   ],\n      // },\n    };\n\n    console.log('Initialized');\n    this.updateChart(true);\n  }\n\n  updateChart(initial = false) {\n    if (!this.hasData) {\n      return;\n    }\n    if (this.chartOptions?.title) {\n      this.chartOptions.title[0].text = this.chartTitle;\n    }\n    const colDate = this.dataset.columns.findIndex((el) => el === '__date_ts');\n    const colOpen = this.dataset.columns.findIndex((el) => el === 'open');\n    const colHigh = this.dataset.columns.findIndex((el) => el === 'high');\n    const colLow = this.dataset.columns.findIndex((el) => el === 'low');\n    const colClose = this.dataset.columns.findIndex((el) => el === 'close');\n    const colVolume = this.dataset.columns.findIndex((el) => el === 'volume');\n    // TODO: Remove below *signal_open after December 2021\n    const colBuyData = this.dataset.columns.findIndex(\n      (el) =>\n        el === '_buy_signal_open' ||\n        el === '_buy_signal_close' ||\n        el === '_enter_long_signal_close',\n    );\n    const colSellData = this.dataset.columns.findIndex(\n      (el) =>\n        el === '_sell_signal_open' ||\n        el === '_sell_signal_close' ||\n        el === '_exit_long_signal_close',\n    );\n\n    const hasShorts =\n      this.dataset.enter_short_signals &&\n      this.dataset.enter_short_signals > 0 &&\n      this.dataset.exit_short_signals &&\n      this.dataset.exit_short_signals > 0;\n    const colShortEntryData = this.dataset.columns.findIndex(\n      (el) => el === '_enter_short_signal_close',\n    );\n    const colShortExitData = this.dataset.columns.findIndex(\n      (el) => el === '_exit_short_signal_close',\n    );\n    console.log('short_exit', colShortExitData);\n\n    const subplotCount =\n      'subplots' in this.plotConfig ? Object.keys(this.plotConfig.subplots).length + 1 : 1;\n\n    if (this.chartOptions?.dataZoom && Array.isArray(this.chartOptions?.dataZoom)) {\n      // Only set zoom once ...\n      if (initial) {\n        const startingZoom = (1 - 250 / this.dataset.length) * 100;\n        this.chartOptions.dataZoom.forEach((el, i) => {\n          if (this.chartOptions && this.chartOptions.dataZoom) {\n            this.chartOptions.dataZoom[i].start = startingZoom;\n          }\n        });\n      } else {\n        // Remove start/end settings after chart initialization to avoid chart resetting\n        this.chartOptions.dataZoom.forEach((el, i) => {\n          if (this.chartOptions && this.chartOptions.dataZoom) {\n            delete this.chartOptions.dataZoom[i].start;\n            delete this.chartOptions.dataZoom[i].end;\n          }\n        });\n      }\n    }\n\n    const options: EChartsOption = {\n      dataset: {\n        source: this.dataset.data,\n      },\n      grid: [\n        {\n          left: MARGINLEFT,\n          right: MARGINRIGHT,\n          // Grid Layout from bottom to top\n          bottom: `${subplotCount * SUBPLOTHEIGHT + 2}%`,\n        },\n        {\n          // Volume\n          left: MARGINLEFT,\n          right: MARGINRIGHT,\n          // Grid Layout from bottom to top\n          bottom: `${subplotCount * SUBPLOTHEIGHT}%`,\n          height: `${SUBPLOTHEIGHT}%`,\n        },\n      ],\n\n      series: [\n        {\n          name: 'Candles',\n          type: 'candlestick',\n          barWidth: '80%',\n          itemStyle: {\n            color: upColor,\n            color0: downColor,\n            borderColor: upBorderColor,\n            borderColor0: downBorderColor,\n          },\n          encode: {\n            x: colDate,\n            // open, close, low, high\n            y: [colOpen, colClose, colLow, colHigh],\n          },\n        },\n        {\n          name: 'Volume',\n          type: 'bar',\n          xAxisIndex: 1,\n          yAxisIndex: 1,\n          itemStyle: {\n            color: '#777777',\n          },\n          large: true,\n          encode: {\n            x: colDate,\n            y: colVolume,\n          },\n        },\n        {\n          name: 'Buy',\n          type: 'scatter',\n          symbol: 'triangle',\n          symbolSize: 10,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: buySignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colBuyData,\n          },\n        },\n        {\n          name: 'Sell',\n          type: 'scatter',\n          symbol: 'diamond',\n          symbolSize: 8,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: sellSignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colSellData,\n          },\n        },\n      ],\n    };\n\n    if (hasShorts) {\n      // Add short support\n      if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n        this.chartOptions.legend.data.push('Short');\n        this.chartOptions.legend.data.push('Short exit');\n      }\n      if (Array.isArray(options.series)) {\n        options.series.push({\n          name: 'Short',\n          type: 'scatter',\n          symbol: 'pin',\n          symbolSize: 10,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: shortEntrySignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colShortEntryData,\n          },\n        });\n        options.series.push({\n          name: 'Short exit',\n          type: 'scatter',\n          symbol: 'pin',\n          symbolSize: 8,\n          xAxisIndex: 0,\n          yAxisIndex: 0,\n          itemStyle: {\n            color: shortexitSignalColor,\n          },\n          encode: {\n            x: colDate,\n            y: colShortExitData,\n          },\n        });\n      }\n    }\n\n    // Merge this into original data\n    Object.assign(this.chartOptions, options);\n\n    if ('main_plot' in this.plotConfig) {\n      Object.entries(this.plotConfig.main_plot).forEach(([key, value]) => {\n        const col = this.dataset.columns.findIndex((el) => el === key);\n        if (col > 1) {\n          if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n            this.chartOptions.legend.data.push(key);\n          }\n          const sp: SeriesOption = {\n            name: key,\n            type: value.type || 'line',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            itemStyle: {\n              color: value.color,\n            },\n            encode: {\n              x: colDate,\n              y: col,\n            },\n            showSymbol: false,\n          };\n          if (Array.isArray(this.chartOptions.series)) {\n            this.chartOptions.series.push(sp);\n          }\n        } else {\n          console.log(`element ${key} for main plot not found in columns.`);\n        }\n      });\n    }\n\n    // START Subplots\n    if ('subplots' in this.plotConfig) {\n      let plotIndex = 2;\n      Object.entries(this.plotConfig.subplots).forEach(([key, value]) => {\n        // define yaxis\n\n        // Subplots are added from bottom to top - only the \"bottom-most\" plot stays at the bottom.\n        // const currGridIdx = totalSubplots - plotIndex > 1 ? totalSubplots - plotIndex : plotIndex;\n        const currGridIdx = plotIndex;\n        if (Array.isArray(this.chartOptions.yAxis) && this.chartOptions.yAxis.length <= plotIndex) {\n          this.chartOptions.yAxis.push({\n            scale: true,\n            gridIndex: currGridIdx,\n            name: key,\n            nameLocation: 'middle',\n            nameGap: NAMEGAP,\n            axisLabel: { show: true },\n            axisLine: { show: false },\n            axisTick: { show: false },\n            splitLine: { show: false },\n          });\n        }\n        if (Array.isArray(this.chartOptions.xAxis) && this.chartOptions.xAxis.length <= plotIndex) {\n          this.chartOptions.xAxis.push({\n            type: 'time',\n            scale: true,\n            gridIndex: currGridIdx,\n            boundaryGap: false,\n            axisLine: { onZero: false },\n            axisTick: { show: false },\n            axisLabel: { show: false },\n            axisPointer: {\n              label: { show: false },\n            },\n            splitLine: { show: false },\n            splitNumber: 20,\n          });\n        }\n        if (Array.isArray(this.chartOptions.dataZoom)) {\n          this.chartOptions.dataZoom.forEach((el) =>\n            el.xAxisIndex && Array.isArray(el.xAxisIndex) ? el.xAxisIndex.push(plotIndex) : null,\n          );\n        }\n        if (this.chartOptions.grid && Array.isArray(this.chartOptions.grid)) {\n          this.chartOptions.grid.push({\n            left: MARGINLEFT,\n            right: MARGINRIGHT,\n            bottom: `${(subplotCount - plotIndex + 1) * SUBPLOTHEIGHT}%`,\n            height: `${SUBPLOTHEIGHT}%`,\n          });\n        }\n        Object.entries(value).forEach(([sk, sv]) => {\n          // entries per subplot\n          const col = this.dataset.columns.findIndex((el) => el === sk);\n          if (col > 0) {\n            if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n              this.chartOptions.legend.data.push(sk);\n            }\n            const sp: SeriesOption = {\n              name: sk,\n              type: sv.type || 'line',\n              xAxisIndex: plotIndex,\n              yAxisIndex: plotIndex,\n              itemStyle: {\n                color: sv.color || randomColor(),\n              },\n              encode: {\n                x: colDate,\n                y: col,\n              },\n              showSymbol: false,\n            };\n            if (this.chartOptions.series && Array.isArray(this.chartOptions.series)) {\n              this.chartOptions.series.push(sp);\n            }\n          } else {\n            console.log(`element ${sk} was not found in the columns.`);\n          }\n        });\n\n        plotIndex += 1;\n      });\n    }\n    // END Subplots\n    // Last subplot should show xAxis labels\n    // if (options.xAxis && Array.isArray(options.xAxis)) {\n    //   options.xAxis[options.xAxis.length - 1].axisLabel.show = true;\n    //   options.xAxis[options.xAxis.length - 1].axisTick.show = true;\n    // }\n    if (this.chartOptions.grid && Array.isArray(this.chartOptions.grid)) {\n      // Last subplot is bottom\n      this.chartOptions.grid[this.chartOptions.grid.length - 1].bottom = '50px';\n      delete this.chartOptions.grid[this.chartOptions.grid.length - 1].top;\n    }\n    const { trades, tradesClose } = this.getTradeEntries();\n\n    const name = 'Trades';\n    const nameClose = 'Trades Close';\n    if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n      this.chartOptions.legend.data.push(name);\n    }\n    const sp: ScatterSeriesOption = {\n      name,\n      type: 'scatter',\n      xAxisIndex: 0,\n      yAxisIndex: 0,\n      itemStyle: {\n        color: tradeBuyColor,\n      },\n      data: trades,\n    };\n    if (Array.isArray(this.chartOptions?.series)) {\n      this.chartOptions.series.push(sp);\n    }\n    if (!Array.isArray(this.chartOptions.legend) && this.chartOptions.legend?.data) {\n      this.chartOptions.legend.data.push(nameClose);\n    }\n    const closeSeries: ScatterSeriesOption = {\n      name: nameClose,\n      type: 'scatter',\n      xAxisIndex: 0,\n      yAxisIndex: 0,\n      itemStyle: {\n        color: tradeSellColor,\n      },\n      data: tradesClose,\n    };\n    if (this.chartOptions.series && Array.isArray(this.chartOptions.series)) {\n      this.chartOptions.series.push(closeSeries);\n    }\n\n    console.log('chartOptions', this.chartOptions);\n\n    this.$refs.candleChart.setOption(this.chartOptions);\n  }\n\n  /** Return trade entries for charting */\n  getTradeEntries() {\n    const trades: (string | number)[][] = [];\n    const tradesClose: (string | number)[][] = [];\n    for (let i = 0, len = this.filteredTrades.length; i < len; i += 1) {\n      const trade: Trade = this.filteredTrades[i];\n      if (\n        trade.open_timestamp >= this.dataset.data_start_ts &&\n        trade.open_timestamp <= this.dataset.data_stop_ts\n      ) {\n        trades.push([roundTimeframe(this.timeframems, trade.open_timestamp), trade.open_rate]);\n      }\n      if (\n        trade.close_timestamp !== undefined &&\n        trade.close_timestamp < this.dataset.data_stop_ts &&\n        trade.close_timestamp > this.dataset.data_start_ts\n      ) {\n        if (trade.close_date !== undefined && trade.close_rate !== undefined) {\n          tradesClose.push([\n            roundTimeframe(this.timeframems, trade.close_timestamp),\n            trade.close_rate,\n          ]);\n        }\n      }\n    }\n    return { trades, tradesClose };\n  }\n\n  // createSignalData(colDate: number, colOpen: number, colBuy: number, colSell: number): void {\n  // Calculate Buy and sell Series\n  // if (!this.signalsCalculated) {\n  //   // Generate Buy and sell array (using open rate to display marker)\n  //   for (let i = 0, len = this.dataset.data.length; i < len; i += 1) {\n  //     if (this.dataset.data[i][colBuy] === 1) {\n  //       this.buyData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n  //     }\n  //     if (this.dataset.data[i][colSell] === 1) {\n  //       this.sellData.push([this.dataset.data[i][colDate], this.dataset.data[i][colOpen]]);\n  //     }\n  //   }\n  //   this.signalsCalculated = true;\n  // }\n  // }\n\n  @Watch('useUTC')\n  useUTCChanged() {\n    this.initializeChartOptions();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChart.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CandleChart.vue?vue&type=template&id=21f6421f&scoped=true&\"\nimport script from \"./CandleChart.vue?vue&type=script&lang=ts&\"\nexport * from \"./CandleChart.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CandleChart.vue?vue&type=style&index=0&id=21f6421f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21f6421f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.columns)?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Plot config name\",\"label-for\":\"idPlotConfigName\"}},[_c('b-form-input',{attrs:{\"id\":\"idPlotConfigName\",\"size\":\"sm\"},model:{value:(_vm.plotConfigNameLoc),callback:function ($$v) {_vm.plotConfigNameLoc=$$v},expression:\"plotConfigNameLoc\"}})],1),_c('div',{staticClass:\"col-mb-3\"},[_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Target\",\"label-for\":\"FieldSel\"}},[_c('b-form-select',{attrs:{\"id\":\"FieldSel\",\"options\":_vm.subplots,\"select-size\":3},model:{value:(_vm.selSubPlot),callback:function ($$v) {_vm.selSubPlot=$$v},expression:\"selSubPlot\"}})],1)],1),_c('b-form-group',{attrs:{\"label\":\"Add new plot\",\"label-for\":\"newSubPlot\"}},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-form-input',{staticClass:\"addPlot\",attrs:{\"id\":\"newSubPlot\"},model:{value:(_vm.newSubplotName),callback:function ($$v) {_vm.newSubplotName=$$v},expression:\"newSubplotName\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"disabled\":!_vm.newSubplotName},on:{\"click\":_vm.addSubplot}},[_vm._v(\"+\")]),(_vm.selSubPlot && _vm.selSubPlot != 'main_plot')?_c('b-button',{on:{\"click\":_vm.delSubplot}},[_vm._v(\"-\")]):_vm._e()],1)],1)],1),_c('hr'),_c('div',[_c('b-form-group',{attrs:{\"label\":\"Used indicators\",\"label-for\":\"selectedIndicators\"}},[_c('b-form-select',{attrs:{\"id\":\"selectedIndicators\",\"options\":_vm.usedColumns,\"select-size\":4},model:{value:(_vm.selIndicatorName),callback:function ($$v) {_vm.selIndicatorName=$$v},expression:\"selIndicatorName\"}})],1)],1),_c('div',[_c('b-button',{attrs:{\"variant\":\"primary\",\"title\":\"Add indicator to plot\",\"size\":\"sm\",\"disabled\":_vm.addNewIndicator},on:{\"click\":function($event){_vm.addNewIndicator = !_vm.addNewIndicator}}},[_vm._v(\" Add new indicator \")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"title\":\"Remove indicator to plot\",\"size\":\"sm\",\"disabled\":!_vm.selIndicatorName},on:{\"click\":_vm.removeIndicator}},[_vm._v(\" Remove indicator \")])],1),(_vm.selIndicatorName || _vm.addNewIndicator)?_c('PlotIndicator',{staticClass:\"mt-1\",attrs:{\"columns\":_vm.columns,\"add-new\":_vm.addNewIndicator},model:{value:(_vm.selIndicator),callback:function ($$v) {_vm.selIndicator=$$v},expression:\"selIndicator\"}}):_vm._e(),_c('hr'),_c('div',[_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.loadPlotConfig}},[_vm._v(\"Load\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.loadPlotConfigFromStrategy}},[_vm._v(\" From strategy \")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"data-toggle\":\"tooltip\",\"title\":\"Save configuration\"},on:{\"click\":_vm.savePlotConfig}},[_vm._v(\"Save\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Load configuration from text box below\"},on:{\"click\":_vm.resetConfig}},[_vm._v(\"Reset\")]),_c('b-button',{staticClass:\"ml-1\",attrs:{\"id\":\"showButton\",\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Show configuration for easy transfer to a strategy\"},on:{\"click\":function($event){_vm.showConfig = !_vm.showConfig}}},[_vm._v(\"Show\")]),(_vm.showConfig)?_c('b-button',{staticClass:\"ml-1\",attrs:{\"variant\":\"primary\",\"size\":\"sm\",\"title\":\"Load configuration from text box below\"},on:{\"click\":_vm.loadConfigFromString}},[_vm._v(\"Load from String\")]):_vm._e()],1),(_vm.showConfig)?_c('div',{staticClass:\"col-mb-5 ml-1 mt-2\"},[_c('b-textarea',{staticClass:\"textArea\",attrs:{\"id\":\"TextArea\",\"size\":\"sm\",\"state\":_vm.tempPlotConfigValid},model:{value:(_vm.plotConfigJson),callback:function ($$v) {_vm.plotConfigJson=$$v},expression:\"plotConfigJson\"}})],1):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.addNew)?_c('div',[_c('b-form-group',{attrs:{\"label\":\"Add indicator\",\"label-for\":\"indicatorSelector\"}},[_c('b-form-select',{attrs:{\"id\":\"indicatorSelector\",\"options\":_vm.columns,\"select-size\":4},model:{value:(_vm.selAvailableIndicator),callback:function ($$v) {_vm.selAvailableIndicator=$$v},expression:\"selAvailableIndicator\"}})],1)],1):_vm._e(),_c('b-form-group',{attrs:{\"label\":\"Type\",\"label-for\":\"plotTypeSelector\"}},[_c('b-form-select',{attrs:{\"id\":\"plotTypeSelector\",\"size\":\"sm\",\"options\":_vm.availableGraphTypes},on:{\"change\":function($event){return _vm.emitIndicator()}},model:{value:(_vm.graphType),callback:function ($$v) {_vm.graphType=$$v},expression:\"graphType\"}})],1),_c('hr'),_c('b-form-group',{attrs:{\"label\":\"Color\",\"label-for\":\"colsel\",\"size\":\"sm\"}},[_c('b-input-group',[_c('b-input-group-prepend',[_c('div',{staticClass:\"colorbox mr-2\",style:({ 'background-color': _vm.selColor })})]),_c('b-form-input',{attrs:{\"id\":\"colsel\",\"size\":\"sm\"},model:{value:(_vm.selColor),callback:function ($$v) {_vm.selColor=$$v},expression:\"selColor\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"variant\":\"primary\",\"size\":\"sm\"},on:{\"click\":_vm.newColor}},[_vm._v(\"↻\")])],1)],1)],1),_c('div',{staticClass:\"d-flex d-flex-columns d-flex\"},[(_vm.addNew)?_c('b-button',{staticClass:\"flex-grow-1\",attrs:{\"variant\":\"primary\",\"title\":\"Add \",\"size\":\"sm\"},on:{\"click\":_vm.emitIndicator}},[_vm._v(\" Save indicator \")]):_vm._e(),(_vm.addNew)?_c('b-button',{staticClass:\"ml-1 flex-grow-1\",attrs:{\"variant\":\"primary\",\"title\":\"Add \",\"size\":\"sm\"},on:{\"click\":_vm.clickCancel}},[_vm._v(\" Cancel \")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { ChartType, IndicatorConfig } from '@/types';\nimport { Component, Emit, Prop, Vue, Watch } from 'vue-property-decorator';\nimport randomColor from '@/shared/randomColor';\n\n@Component({})\nexport default class PlotIndicator extends Vue {\n  @Prop({ required: true }) value!: Record<string, IndicatorConfig>;\n\n  @Prop({ required: true }) columns!: string[];\n\n  @Prop({ required: true }) addNew!: boolean;\n\n  @Emit('input')\n  emitIndicator() {\n    return this.combinedIndicator;\n  }\n\n  selColor = randomColor();\n\n  graphType: ChartType = ChartType.line;\n\n  availableGraphTypes = Object.keys(ChartType);\n\n  selAvailableIndicator = '';\n\n  cancelled = false;\n\n  @Watch('value')\n  watchValue() {\n    [this.selAvailableIndicator] = Object.keys(this.value);\n    this.cancelled = false;\n    if (this.selAvailableIndicator && this.value) {\n      this.selColor = this.value[this.selAvailableIndicator].color || randomColor();\n      this.graphType = this.value[this.selAvailableIndicator].type || ChartType.line;\n    }\n  }\n\n  @Watch('selColor')\n  watchColor() {\n    if (!this.addNew) {\n      this.emitIndicator();\n    }\n  }\n\n  clickCancel() {\n    this.cancelled = true;\n    this.emitIndicator();\n  }\n\n  get combinedIndicator() {\n    if (this.cancelled || !this.selAvailableIndicator) {\n      return {};\n    }\n    return {\n      [this.selAvailableIndicator]: {\n        color: this.selColor,\n        type: this.graphType,\n      },\n    };\n  }\n\n  newColor() {\n    this.selColor = randomColor();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotIndicator.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotIndicator.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlotIndicator.vue?vue&type=template&id=2dfb5bfd&scoped=true&\"\nimport script from \"./PlotIndicator.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlotIndicator.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlotIndicator.vue?vue&type=style&index=0&id=2dfb5bfd&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dfb5bfd\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Emit, Watch } from 'vue-property-decorator';\nimport { namespace } from 'vuex-class';\nimport { PlotConfig, EMPTY_PLOTCONFIG, IndicatorConfig } from '@/types';\nimport { getCustomPlotConfig } from '@/shared/storage';\nimport PlotIndicator from '@/components/charts/PlotIndicator.vue';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport { AlertActions } from '@/store/modules/alerts';\n\nconst ftbot = namespace('ftbot');\n\nconst alerts = namespace('alerts');\n\n@Component({\n  components: { PlotIndicator },\n})\nexport default class PlotConfigurator extends Vue {\n  @Prop({ required: true }) value!: PlotConfig;\n\n  @Prop({ required: true }) columns!: Array<string>;\n\n  @Prop({ required: false, default: true }) asModal!: boolean;\n\n  @Emit('input')\n  emitPlotConfig() {\n    return this.plotConfig;\n  }\n\n  @ftbot.Action getStrategyPlotConfig;\n\n  @ftbot.Getter [BotStoreGetters.strategyPlotConfig];\n\n  get selIndicator(): Record<string, IndicatorConfig> {\n    if (this.addNewIndicator) {\n      return {};\n    }\n    if (this.selIndicatorName) {\n      return {\n        [this.selIndicatorName]: this.currentPlotConfig[this.selIndicatorName],\n      };\n    }\n    return {};\n  }\n\n  set selIndicator(newValue: Record<string, IndicatorConfig>) {\n    // console.log('newValue', newValue);\n    const name = Object.keys(newValue)[0];\n    // this.currentPlotConfig[this.selIndicatorName] = { ...newValue[name] };\n    // this.emitPlotConfig();\n    if (name && newValue) {\n      this.addIndicator(newValue);\n    } else {\n      this.addNewIndicator = false;\n    }\n  }\n\n  plotConfig: PlotConfig = EMPTY_PLOTCONFIG;\n\n  plotOptions = [\n    { text: 'Main Plot', value: 'main_plot' },\n    { text: 'Subplots', value: 'subplots' },\n  ];\n\n  plotConfigNameLoc = 'default';\n\n  newSubplotName = '';\n\n  selAvailableIndicator = '';\n\n  selIndicatorName = '';\n\n  addNewIndicator = false;\n\n  showConfig = false;\n\n  selSubPlot = 'main_plot';\n\n  tempPlotConfig?: PlotConfig = undefined;\n\n  tempPlotConfigValid = true;\n\n  @ftbot.Action saveCustomPlotConfig;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action updatePlotConfigName!: (plotConfigName: string) => void;\n\n  @ftbot.Getter [BotStoreGetters.plotConfigName]!: string;\n\n  @alerts.Action [AlertActions.addAlert];\n\n  get plotConfigJson() {\n    return JSON.stringify(this.plotConfig, null, 2);\n  }\n\n  set plotConfigJson(newValue: string) {\n    try {\n      this.tempPlotConfig = JSON.parse(newValue);\n      // TODO: Should Validate schema validity (should be PlotConfig type...)\n      this.tempPlotConfigValid = true;\n    } catch (err) {\n      this.tempPlotConfigValid = false;\n    }\n  }\n\n  get subplots(): string[] {\n    // Subplot keys (for selection window)\n    return ['main_plot', ...Object.keys(this.plotConfig.subplots)];\n  }\n\n  get usedColumns(): string[] {\n    if (this.isMainPlot) {\n      return Object.keys(this.plotConfig.main_plot);\n    }\n    if (this.selSubPlot in this.plotConfig.subplots) {\n      return Object.keys(this.plotConfig.subplots[this.selSubPlot]);\n    }\n    return [];\n  }\n\n  get isMainPlot() {\n    return this.selSubPlot === 'main_plot';\n  }\n\n  get currentPlotConfig() {\n    if (this.isMainPlot) {\n      return this.plotConfig.main_plot;\n    }\n\n    return this.plotConfig.subplots[this.selSubPlot];\n  }\n\n  mounted() {\n    console.log('Config Mounted', this.value);\n    this.plotConfig = this.value;\n    this.plotConfigNameLoc = this.plotConfigName;\n  }\n\n  @Watch('value')\n  watchValue() {\n    this.plotConfig = this.value;\n    this.plotConfigNameLoc = this.plotConfigName;\n  }\n\n  addIndicator(newIndicator: Record<string, IndicatorConfig>) {\n    console.log(this.plotConfig);\n\n    const { plotConfig } = this;\n    const name = Object.keys(newIndicator)[0];\n    const indicator = newIndicator[name];\n    if (this.isMainPlot) {\n      console.log(`Adding ${name} to MainPlot`);\n      plotConfig.main_plot[name] = { ...indicator };\n    } else {\n      console.log(`Adding ${name} to ${this.selSubPlot}`);\n      plotConfig.subplots[this.selSubPlot][name] = { ...indicator };\n    }\n\n    this.plotConfig = { ...plotConfig };\n    // Reset random color\n    this.addNewIndicator = false;\n    this.emitPlotConfig();\n  }\n\n  removeIndicator() {\n    console.log(this.plotConfig);\n    const { plotConfig } = this;\n    if (this.isMainPlot) {\n      console.log(`Removing ${this.selIndicatorName} from MainPlot`);\n      delete plotConfig.main_plot[this.selIndicatorName];\n    } else {\n      console.log(`Removing ${this.selIndicatorName} from ${this.selSubPlot}`);\n      delete plotConfig.subplots[this.selSubPlot][this.selIndicatorName];\n    }\n\n    this.plotConfig = { ...plotConfig };\n    console.log(this.plotConfig);\n    this.selIndicatorName = '';\n    this.emitPlotConfig();\n  }\n\n  addSubplot() {\n    this.plotConfig.subplots = {\n      ...this.plotConfig.subplots,\n      [this.newSubplotName]: {},\n    };\n    this.selSubPlot = this.newSubplotName;\n    this.newSubplotName = '';\n\n    console.log(this.plotConfig);\n    this.emitPlotConfig();\n  }\n\n  delSubplot() {\n    delete this.plotConfig.subplots[this.selSubPlot];\n    this.plotConfig.subplots = { ...this.plotConfig.subplots };\n    this.selSubPlot = '';\n  }\n\n  savePlotConfig() {\n    this.saveCustomPlotConfig({ [this.plotConfigNameLoc]: this.plotConfig });\n  }\n\n  loadPlotConfig() {\n    this.plotConfig = getCustomPlotConfig(this.plotConfigNameLoc);\n    console.log(this.plotConfig);\n    console.log('loading config');\n    this.emitPlotConfig();\n  }\n\n  loadConfigFromString() {\n    // this.plotConfig = JSON.parse();\n    if (this.tempPlotConfig !== undefined && this.tempPlotConfigValid) {\n      this.plotConfig = this.tempPlotConfig;\n      this.emitPlotConfig();\n    }\n  }\n\n  resetConfig() {\n    this.plotConfig = { ...EMPTY_PLOTCONFIG };\n  }\n\n  async loadPlotConfigFromStrategy() {\n    try {\n      await this.getStrategyPlotConfig();\n      this.plotConfig = this.strategyPlotConfig;\n      this.emitPlotConfig();\n    } catch (data) {\n      //\n      this.addAlert({ message: 'Failed to load Plot configuration from Strategy.' });\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlotConfigurator.vue?vue&type=template&id=34ebf3b4&scoped=true&\"\nimport script from \"./PlotConfigurator.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlotConfigurator.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlotConfigurator.vue?vue&type=style&index=0&id=34ebf3b4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34ebf3b4\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Getter, namespace } from 'vuex-class';\nimport {\n  Trade,\n  PairHistory,\n  EMPTY_PLOTCONFIG,\n  PlotConfig,\n  PairCandlePayload,\n  PairHistoryPayload,\n} from '@/types';\nimport CandleChart from '@/components/charts/CandleChart.vue';\nimport PlotConfigurator from '@/components/charts/PlotConfigurator.vue';\nimport { getCustomPlotConfig, getPlotConfigName } from '@/shared/storage';\nimport { BotStoreGetters } from '@/store/modules/ftbot';\nimport { SettingsGetters } from '@/store/modules/settings';\n\nconst ftbot = namespace('ftbot');\nconst uiSettingsNs = namespace('uiSettings');\n\n@Component({ components: { CandleChart, PlotConfigurator } })\nexport default class CandleChartContainer extends Vue {\n  @Prop({ required: true }) readonly availablePairs!: string[];\n\n  @Prop({ required: true }) readonly timeframe!: string;\n\n  @Prop({ required: false, default: () => [] }) readonly trades!: Array<Trade>;\n\n  @Prop({ required: false, default: false }) historicView!: boolean;\n\n  @Prop({ required: false, default: true }) plotConfigModal!: boolean;\n\n  /** Only required if historicView is true */\n  @Prop({ required: false, default: false }) timerange!: string;\n\n  /**\n   * Only required if historicView is true\n   */\n  @Prop({ required: false, default: false }) strategy!: string;\n\n  pair = '';\n\n  plotConfig: PlotConfig = { ...EMPTY_PLOTCONFIG };\n\n  plotConfigName = '';\n\n  showPlotConfig = this.plotConfigModal;\n\n  @Getter getChartTheme!: string;\n\n  @ftbot.Getter [BotStoreGetters.availablePlotConfigNames]!: string[];\n\n  @ftbot.Action setPlotConfigName;\n\n  @ftbot.Getter [BotStoreGetters.candleData]!: PairHistory;\n\n  @ftbot.Getter [BotStoreGetters.history]!: PairHistory;\n\n  @ftbot.Getter [BotStoreGetters.selectedPair]!: string;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action public getPairCandles!: (payload: PairCandlePayload) => void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  @ftbot.Action public getPairHistory!: (payload: PairHistoryPayload) => void;\n\n  @uiSettingsNs.Getter [SettingsGetters.timezone]: string;\n\n  get dataset(): PairHistory {\n    if (this.historicView) {\n      return this.history[`${this.pair}__${this.timeframe}`];\n    }\n    return this.candleData[`${this.pair}__${this.timeframe}`];\n  }\n\n  get strategyName() {\n    return this.strategy || this.dataset?.strategy || '';\n  }\n\n  get datasetColumns() {\n    return this.dataset ? this.dataset.columns : [];\n  }\n\n  get hasDataset(): boolean {\n    return !!this.dataset;\n  }\n\n  mounted() {\n    if (this.selectedPair) {\n      this.pair = this.selectedPair;\n    } else if (this.availablePairs.length > 0) {\n      [this.pair] = this.availablePairs;\n    }\n    this.plotConfigName = getPlotConfigName();\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n  }\n\n  plotConfigChanged() {\n    console.log('plotConfigChanged');\n    this.plotConfig = getCustomPlotConfig(this.plotConfigName);\n    this.setPlotConfigName(this.plotConfigName);\n  }\n\n  showConfigurator() {\n    if (this.plotConfigModal) {\n      this.$bvModal.show('plotConfiguratorModal');\n    } else {\n      this.showPlotConfig = !this.showPlotConfig;\n    }\n  }\n\n  refresh() {\n    if (this.pair && this.timeframe) {\n      if (this.historicView) {\n        this.getPairHistory({\n          pair: this.pair,\n          timeframe: this.timeframe,\n          timerange: this.timerange,\n          strategy: this.strategy,\n        });\n      } else {\n        this.getPairCandles({ pair: this.pair, timeframe: this.timeframe, limit: 500 });\n      }\n    }\n  }\n\n  @Watch('availablePairs')\n  watchAvailablePairs() {\n    if (!this.availablePairs.find((pair) => pair === this.pair)) {\n      [this.pair] = this.availablePairs;\n      this.refresh();\n    }\n  }\n\n  @Watch(BotStoreGetters.selectedPair)\n  watchSelectedPair() {\n    this.pair = this.selectedPair;\n    this.refresh();\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CandleChartContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CandleChartContainer.vue?vue&type=template&id=3eaa31d8&scoped=true&\"\nimport script from \"./CandleChartContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./CandleChartContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CandleChartContainer.vue?vue&type=style&index=0&id=3eaa31d8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3eaa31d8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlotConfigurator.vue?vue&type=style&index=0&id=34ebf3b4&scoped=true&lang=css&\""],"sourceRoot":""}